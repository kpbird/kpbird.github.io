---
layout: post
title: 'Volley: Easy, Fast Networking for Android - Example'
date: '2013-05-24T17:15:00.000+05:30'
author: Ketan Parmar
tags:
- example
- framework
- tutorial
- Android
- fast networking
- volley
modified_time: '2013-05-24T17:15:46.347+05:30'
thumbnail: http://1.bp.blogspot.com/-0qIfJ_PmlGU/UZ3pQGy0u_I/AAAAAAAAD-c/8ZQgalhJlFI/s72-c/Screen+Shot+2013-05-23+at+3.32.46+PM.png
blogger_id: tag:blogger.com,1999:blog-17114597.post-2823200009724018936
blogger_orig_url: http://www.kpbird.com/2013/05/volley-easy-fast-networking-for-android.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-0qIfJ_PmlGU/UZ3pQGy0u_I/AAAAAAAAD-c/8ZQgalhJlFI/s1600/Screen+Shot+2013-05-23+at+3.32.46+PM.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><span style="font-family: Verdana, sans-serif;"><img border="0" height="213" src="http://1.bp.blogspot.com/-0qIfJ_PmlGU/UZ3pQGy0u_I/AAAAAAAAD-c/8ZQgalhJlFI/s320/Screen+Shot+2013-05-23+at+3.32.46+PM.png" width="320" /></span></a></div><div style="text-align: justify;"><span style="background-color: white; color: #222222; line-height: 21px;"><span style="font-family: Verdana, sans-serif;">Volley is a library that makes networking for Android apps easier and most importantly, faster. We'll give an overview of how it works, common patterns that work well with it, and a walkthrough of how you can easily load thumbnail images for your ListView from the network in parallel.</span></span></div><div style="text-align: justify;"><span style="background-color: white; color: #222222; line-height: 21px;"><span style="font-family: Verdana, sans-serif;"><br /></span></span></div><div style="text-align: justify;"><span style="background-color: white;"><span style="font-family: Verdana, sans-serif;"><span style="color: #222222;"><span style="line-height: 21px;">Volley can be powerful alternative of AsyncTask. As Android developers, we are spending lots of time to write AsyncTask for ListView and web service calls. &nbsp;Recently I read&nbsp;awesome&nbsp;article about AsyncTask, I suggest all Android developers to read this article <a href="http://bon-app-etit.blogspot.in/2013/04/the-dark-side-of-asynctask.html">"Dark Side of AsyncTask"</a>&nbsp;by <a class="g-profile" href="http://plus.google.com/106214265123129218556" target="_blank">+Fr√© Dumazy</a>,&nbsp;&nbsp;AsyncTask is redundant in every project. I hope many developer are agree with me, Thank to Volley framework now we can reduct effort,coding and time to write AsyncTasks.</span></span></span></span><br /><span style="background-color: white;"><span style="font-family: Verdana, sans-serif;"><span style="color: #222222;"><span style="line-height: 21px;"><br /></span></span></span></span></div><div style="text-align: justify;"><span style="background-color: white;"><span style="font-family: Verdana, sans-serif;"><span style="color: #222222;"><span style="line-height: 21px;">This article illustrate simple example of Volley library. VolleyTest application fetch JSON feed from Yahoo Pipe and display in ListView.</span></span></span></span><br /><span style="font-family: Verdana, sans-serif;"></span><div class="separator" style="clear: both; text-align: center;"><span style="font-family: Verdana, sans-serif;"><a href="http://2.bp.blogspot.com/-yn52R38ZQEM/UZ8usxVEhAI/AAAAAAAAD_E/541CNRi0i4Y/s1600/Screen+Shot+2013-05-24+at+2.39.03+PM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="320" src="http://2.bp.blogspot.com/-yn52R38ZQEM/UZ8usxVEhAI/AAAAAAAAD_E/541CNRi0i4Y/s320/Screen+Shot+2013-05-24+at+2.39.03+PM.png" width="187" /></a><a href="http://3.bp.blogspot.com/-zRuqVKGoHys/UZ8utKYHuPI/AAAAAAAAD_I/K7WiJq4x_lc/s1600/Screen+Shot+2013-05-24+at+2.39.13+PM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="320" src="http://3.bp.blogspot.com/-zRuqVKGoHys/UZ8utKYHuPI/AAAAAAAAD_I/K7WiJq4x_lc/s320/Screen+Shot+2013-05-24+at+2.39.13+PM.png" width="187" /></a></span></div><br /></div><div style="text-align: justify;"><span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 21px;"><b>Step 1:</b> Download/Clone Volley library from git repo</span></span></div><div style="text-align: justify;"><span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 21px;"><br /></span></span></div><div style="text-align: justify;"><div style="text-align: left;"><span style="color: #222222;"><span style="font-family: Courier New, Courier, monospace; line-height: 21px;">&nbsp;git clone https://android.googlesource.com/platform/frameworks/volley</span></span></div></div><div style="text-align: justify;"><div style="text-align: left;"><span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 21px;"><br /></span></span></div></div><div style="text-align: justify;"><span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 21px;"><b>Step 2:</b> Create new project in *Android Studio named "VolleyTest"</span></span></div><div style="text-align: justify;"><span style="color: #222222; font-family: Verdana, sans-serif;"><span style="font-size: xx-small; line-height: 21px;">*Note: This is my first project in Android Studio</span></span></div><div style="text-align: justify;"><span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 21px;"><br /></span></span></div><div style="text-align: justify;"><span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 21px;"><b>Step 3:</b> Copy Volley library source code in "VolleyTest" project, Copying source in our project is safe and easy that's why I copy source of Volley in VolleyTest project.&nbsp;</span></span></div><div style="text-align: justify;"><span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 21px;"><br /></span></span></div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-xXRUVyaxs0Q/UZ4UCR0WtEI/AAAAAAAAD-0/cJBzvVM_m0g/s1600/Screen+Shot+2013-05-23+at+3.49.11+PM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><span style="font-family: Verdana, sans-serif;"><img border="0" height="474" src="http://2.bp.blogspot.com/-xXRUVyaxs0Q/UZ4UCR0WtEI/AAAAAAAAD-0/cJBzvVM_m0g/s640/Screen+Shot+2013-05-23+at+3.49.11+PM.png" width="640" /></span></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div style="text-align: justify;"><span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 21px;"><b>Step 4: Add Internet permission in AndroidManifest.xml</b></span></span><br /><pre class="brush:xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;<br />&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"<br />    package="com.kpbird.volleytest"<br />    android:versionCode="1"<br />    android:versionName="1.0" &gt;<br /><br />    &lt;uses-sdk<br />        android:minSdkVersion="9"<br />        android:targetSdkVersion="14" /&gt;<br /><br />    &lt;application<br />        android:allowBackup="true"<br />        android:icon="@drawable/ic_launcher"<br />        android:label="@string/app_name"<br />        android:theme="@style/AppTheme" &gt;<br />        &lt;activity<br />            android:name="com.kpbird.volleytest.MainActivity"<br />            android:label="@string/app_name" &gt;<br />            &lt;intent-filter&gt;<br />                &lt;action android:name="android.intent.action.MAIN" /&gt;<br /><br />                &lt;category android:name="android.intent.category.LAUNCHER" /&gt;<br />            &lt;/intent-filter&gt;<br />        &lt;/activity&gt;<br /><br />    &lt;/application&gt;<br />    &lt;uses-permission android:name="android.permission.INTERNET"&gt;&lt;/uses-permission&gt;<br />&lt;/manifest&gt;<br /><br /></pre><span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 21px;"><b>Step 5: Add ListView in activity_main.xml</b></span></span><br /><pre class="brush:xml">&lt;RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"<br />    xmlns:tools="http://schemas.android.com/tools"<br />    android:layout_width="match_parent"<br />    android:layout_height="match_parent"<br />    android:paddingLeft="@dimen/activity_horizontal_margin"<br />    android:paddingRight="@dimen/activity_horizontal_margin"<br />    android:paddingTop="@dimen/activity_vertical_margin"<br />    android:paddingBottom="@dimen/activity_vertical_margin"<br />    tools:context=".MainActivity"&gt;<br /><br />    &lt;ListView<br />            android:layout_width="wrap_content"<br />            android:layout_height="wrap_content"<br />            android:id="@+id/listView"<br />            android:layout_alignParentTop="true" android:layout_alignParentLeft="true"/&gt;<br />&lt;/RelativeLayout&gt;<br /><br /></pre><span style="color: #222222; font-family: Verdana, sans-serif;"><span style="line-height: 21px;"><b>Step 6: Create new xml for List row named "row_listview.xml"</b></span></span><br /><pre class="brush:xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;<br /><br />&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"<br />              android:orientation="vertical"<br />              android:layout_width="match_parent"<br />              android:layout_height="100dp"&gt;<br /><br />    &lt;TextView<br />            android:layout_width="fill_parent"<br />            android:layout_height="wrap_content"<br />            android:textAppearance="?android:attr/textAppearanceLarge"<br />            android:text="Large Text"<br />            android:id="@+id/txtTitle" android:layout_gravity="left|center_vertical"/&gt;<br />    &lt;TextView<br />            android:layout_width="match_parent"<br />            android:layout_height="wrap_content"<br />            android:textAppearance="?android:attr/textAppearanceMedium"<br />            android:text="Medium Text"<br />            android:id="@+id/txtDesc" android:layout_gravity="left|center_vertical" android:textColor="#929292"<br />            android:minLines="2" android:ellipsize="end" android:maxLines="2"/&gt;<br />    &lt;TextView<br />            android:layout_width="fill_parent"<br />            android:layout_height="wrap_content"<br />            android:textAppearance="?android:attr/textAppearanceSmall"<br />            android:text="Small Text"<br />            android:id="@+id/txtDate" android:layout_gravity="left|center_vertical" android:textColor="#d6d6d6"/&gt;<br />&lt;/LinearLayout&gt;<br /></pre><span style="font-family: Verdana, sans-serif;"><span style="color: #222222;"><span style="line-height: 21px;"><b><br /></b></span></span><span style="color: #222222;"><span style="line-height: 21px;"><b>Step 7: Add Following code in MainActivity.java file</b></span></span></span><br /><span style="font-family: Verdana, sans-serif;">There are three steps to make web call using Volley</span><br /><div style="text-align: left;"><span style="font-family: Verdana, sans-serif;">1. Create new Queue Request object from Volley class</span><br /><span style="font-family: Verdana, sans-serif;"><br /></span></div><div style="text-align: left;"><pre class="brush:java">private RequestQueue mRequestQueue;<br />.<br />.<br />.<br />mRequestQueue =  Volley.newRequestQueue(this);<br /></pre></div><div style="text-align: left;"><span style="font-family: Verdana, sans-serif;"><br /></span><span style="font-family: Verdana, sans-serif;">2. Create object of JsonObjectRequest and provide all details like url, http method, listeners for success and error</span></div><div style="text-align: left;"><pre class="brush:java">JsonObjectRequest jr = new JsonObjectRequest(Request.Method.GET,url,null,new Response.Listener&lt;JSONObject&gt;() {<br />            @Override<br />            public void onResponse(JSONObject response) {<br />                Log.i(TAG,response.toString());<br />                parseJSON(response);<br />                va.notifyDataSetChanged();<br />                pd.dismiss();<br />;            }<br />        },new Response.ErrorListener() {<br />            @Override<br />            public void onErrorResponse(VolleyError error) {<br />                Log.i(TAG,error.getMessage());<br />            }<br />        });<br /></pre></div><div style="text-align: left;"><span style="font-family: Verdana, sans-serif;"><br /></span><span style="font-family: Verdana, sans-serif;">3. Add JsonObjectRequest to RequestQueue&nbsp;</span></div><div style="text-align: left;"><pre class="brush:java">mRequestQueue.add(jr);<br /></pre></div><div style="text-align: left;"><span style="font-family: Verdana, sans-serif;"><br /></span><span style="font-family: Verdana, sans-serif;">Following code has regular Adapter, Model class. I took everything in one java file for simplicity,&nbsp;</span><br /><span style="font-family: Verdana, sans-serif;"><br /></span><span style="font-family: Verdana, sans-serif;"><b>Complete Source Code</b></span><br /><span style="font-family: Verdana, sans-serif;"><b><br /></b></span></div></div><pre class="brush:java">package com.kpbird.volleytest;<br /><br />import android.app.ProgressDialog;<br />import android.os.Bundle;<br />import android.app.Activity;<br />import android.util.Log;<br />import android.view.LayoutInflater;<br />import android.view.Menu;<br />import android.view.View;<br />import android.view.ViewGroup;<br />import android.widget.BaseAdapter;<br />import android.widget.ListView;<br />import android.widget.TextView;<br />import com.android.volley.Request;<br />import com.android.volley.RequestQueue;<br />import com.android.volley.Response;<br />import com.android.volley.VolleyError;<br />import com.android.volley.toolbox.JsonObjectRequest;<br />import com.android.volley.toolbox.Volley;<br />import org.json.JSONArray;<br />import org.json.JSONObject;<br /><br />import java.util.ArrayList;<br /><br />public class MainActivity extends Activity {<br /><br />    private String TAG = this.getClass().getSimpleName();<br />    private ListView lstView;<br />    private RequestQueue mRequestQueue;<br />    private ArrayList&lt;NewsModel&gt; arrNews ;<br />    private LayoutInflater lf;<br />    private VolleyAdapter va;<br />    private ProgressDialog pd;<br /><br />    @Override<br />    protected void onCreate(Bundle savedInstanceState) {<br />        super.onCreate(savedInstanceState);<br />        setContentView(R.layout.activity_main);<br />        lf = LayoutInflater.from(this);<br /><br /><br />        arrNews = new ArrayList&lt;NewsModel&gt;();<br />        va = new VolleyAdapter();<br /><br />        lstView = (ListView) findViewById(R.id.listView);<br />        lstView.setAdapter(va);<br />        mRequestQueue =  Volley.newRequestQueue(this);<br />        String url = "http://pipes.yahooapis.com/pipes/pipe.run?_id=giWz8Vc33BG6rQEQo_NLYQ&amp;_render=json";<br />        pd = ProgressDialog.show(this,"Please Wait...","Please Wait...");<br />        try{<br />            Thread.sleep(2000);<br />        }catch(Exception e){<br /><br />            }<br />        JsonObjectRequest jr = new JsonObjectRequest(Request.Method.GET,url,null,new Response.Listener&lt;JSONObject&gt;() {<br />            @Override<br />            public void onResponse(JSONObject response) {<br />                Log.i(TAG,response.toString());<br />                parseJSON(response);<br />                va.notifyDataSetChanged();<br />                pd.dismiss();<br />;            }<br />        },new Response.ErrorListener() {<br />            @Override<br />            public void onErrorResponse(VolleyError error) {<br />                Log.i(TAG,error.getMessage());<br />            }<br />        });<br />        mRequestQueue.add(jr);<br /><br /><br /><br />    }<br /><br />    private void parseJSON(JSONObject json){<br />        try{<br />            JSONObject value = json.getJSONObject("value");<br />            JSONArray items = value.getJSONArray("items");<br />            for(int i=0;i&lt;items.length();i++){<br /><br />                    JSONObject item = items.getJSONObject(i);<br />                    NewsModel nm = new NewsModel();<br />                    nm.setTitle(item.optString("title"));<br />                    nm.setDescription(item.optString("description"));<br />                    nm.setLink(item.optString("link"));<br />                    nm.setPubDate(item.optString("pubDate"));<br />                    arrNews.add(nm);<br />            }<br />        }<br />        catch(Exception e){<br />            e.printStackTrace();<br />        }<br /><br /><br />    }<br /><br /><br />    class NewsModel{<br />        private String title;<br />        private String link;<br />        private String description;<br />        private String pubDate;<br /><br />        void setTitle(String title) {<br />            this.title = title;<br />        }<br /><br />        void setLink(String link) {<br />            this.link = link;<br />        }<br /><br />        void setDescription(String description) {<br />            this.description = description;<br />        }<br /><br />        void setPubDate(String pubDate) {<br />            this.pubDate = pubDate;<br />        }<br /><br />        String getLink() {<br />            return link;<br />        }<br /><br />        String getDescription() {<br />            return description;<br />        }<br /><br />        String getPubDate() {<br />            return pubDate;<br />        }<br /><br />        String getTitle() {<br /><br />            return title;<br />        }<br />    }<br /><br /><br />    class VolleyAdapter extends BaseAdapter{<br /><br />        @Override<br />        public int getCount() {<br />            return arrNews.size();<br />        }<br /><br />        @Override<br />        public Object getItem(int i) {<br />            return arrNews.get(i);<br />        }<br /><br />        @Override<br />        public long getItemId(int i) {<br />            return 0;<br />        }<br /><br />        @Override<br />        public View getView(int i, View view, ViewGroup viewGroup) {<br />            ViewHolder vh ;<br />           if(view == null){<br />               vh = new ViewHolder();<br />               view = lf.inflate(R.layout.row_listview,null);<br />               vh.tvTitle = (TextView) view.findViewById(R.id.txtTitle);<br />               vh.tvDesc = (TextView) view.findViewById(R.id.txtDesc);<br />               vh.tvDate = (TextView) view.findViewById(R.id.txtDate);<br />               view.setTag(vh);<br />          }<br />            else{<br />               vh = (ViewHolder) view.getTag();<br />           }<br /><br />            NewsModel nm = arrNews.get(i);<br />            vh.tvTitle.setText(nm.getTitle());<br />            vh.tvDesc.setText(nm.getDescription());<br />            vh.tvDate.setText(nm.getPubDate());<br />            return view;<br />        }<br /><br />         class  ViewHolder{<br />            TextView tvTitle;<br />             TextView tvDesc;<br />             TextView tvDate;<br /><br />        }<br /><br />    }<br />}<br /></pre><br /><span style="font-family: Verdana, sans-serif;"><b>Download Source Code from Github.com</b> <a href="https://github.com/kpbird/volley-example">https://github.com/kpbird/volley-example</a></span>