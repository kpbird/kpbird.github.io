---
layout: post
title: 'Android InDepth : SharedPreference'
date: '2011-04-27T23:26:00.000+05:30'
author: Ketan Parmar
tags:
- SharedPreference
- Android
modified_time: '2011-04-28T00:23:11.940+05:30'
thumbnail: http://4.bp.blogspot.com/-0AgVs6N8jx4/TbgEfAqCOFI/AAAAAAAADGE/aWKnMQp0fNg/s72-c/Untitleddrawing.jpg
blogger_id: tag:blogger.com,1999:blog-17114597.post-6727824162167781596
blogger_orig_url: http://www.kpbird.com/2011/04/android-indepth-sharedpreference.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><style type="text/css">p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Verdana} p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Verdana; min-height: 15.0px} p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Verdana} p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 18.0px; font: 12.0px Verdana} p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 18.0px; font: 12.0px Times; color: #9e0e09} p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; min-height: 15.0px} p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times} p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; text-align: justify; font: 12.0px Verdana; min-height: 15.0px} p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #489075} p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco} p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; min-height: 14.0px} p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #4d78c5} p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #777777} p.p14 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Monaco; color: #3b3df5} p.p15 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo} p.p16 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo; color: #9736b8} p.p17 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo; color: #bf2e9d; min-height: 13.0px} p.p18 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo; min-height: 13.0px} p.p19 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo; color: #008326} p.p20 {margin: 0.0px 0.0px 0.0px 0.0px; font: 11.0px Menlo; color: #d62b24} li.li1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Verdana} li.li4 {margin: 0.0px 0.0px 0.0px 0.0px; line-height: 18.0px; font: 12.0px Verdana} span.s1 {font: 12.0px 'Courier New'} span.s2 {text-decoration: underline ; color: #053aea} span.s3 {color: #3b3df5} span.s4 {color: #000000} span.s5 {color: #961a65} span.s6 {color: #032fc3} span.s7 {text-decoration: underline} span.s8 {color: #bb2510} span.s9 {color: #388d98} span.s10 {color: #053df5} span.s11 {color: #9736b8} span.s12 {font: 11.0px Menlo} span.s13 {color: #bf2e9d} span.s14 {color: #2832cf} span.s15 {font: 12.0px Verdana} span.s16 {color: #008326} span.s17 {color: #d62b24} span.Apple-tab-span {white-space:pre} ul.ul1 {list-style-type: disc} </style>   <br /><div class="p1"><b>1. Introduction</b></div><div class="p2"><br /></div><div class="p3">SharedPreference is used to store settings/preferences. It stores data as key/value pairs. It share data between activities but not across the processes.</div><div class="p2"><br /></div><div class="p1">Shared Preference is stored in&nbsp;/data/data/[package name]/shared_prefs/[SP Name].xml.</div><div class="p2"><br /></div><div class="p3">In Device data/data folder is not accessible but we can access data/data folder in Emulator. Using DDMS allow access to every folders including data/data folder. It is possible to pull &nbsp;the Shared Preference &nbsp;xml file to PC. If we stuck in any problem related to Shared Preference then we can transfer xml file to PC for observation.</div><div class="p2"><br /></div><div class="p2"><br /></div><div class="p1"><b>2. Implementation</b></div><div class="p2"><br /></div><div class="p2"><br /></div><div class="p4">Let's Create simple example of SharedPreference. SharedPreference is Interface. We do not need to create object of SharedPreference. It created with the Activity. I will explain how SharedPreference Object will crate in this tutorial. Activity has method named "getSharedPreference()" we can&nbsp;retrieve object like following.</div><div class="p4"><br /><b>2.1&nbsp;Retrieving object of SharedPreference</b></div><div class="p4">SharedPreference pref = getSharedPreference("MyPRef",MODE_PRIVATE);</div><div class="p4">Method has two parameter Name and Mode, Name is used as XML file name.&nbsp;</div><div class="p2"><br /></div><ul class="ul1"><li class="li4"><span class="s1">MODE_PRIVATE</span> is the operating mode for the preferences. It is the default mode and means the created file will be accessed by only the calling application.&nbsp;</li><li class="li4"><span class="s1">MODE_WORLD_READABLE</span> other application can read the created file but can not modify it.&nbsp;</li><li class="li4"><span class="s1">MODE_WORLD_WRITEABLE</span> other applications also have write permissions for the created file.&nbsp;</li></ul><div class="p4">First mode is default we can implement in this example. but what about other two options. &nbsp;I found following post in "StackOverFlow.com"</div><div class="p2"><br /></div><div class="p2"><br /></div><div class="p5"><i><span class="Apple-style-span" style="color: #e06666;">"As I checked in APIs description for getSharedPreferences(String, int),Second attribute is defining accessibility mode and can take 0 or MODE_PRIVATE for the default operation, MODE_WORLD_READABLE and MODE_WORLD_WRITEABLE to control permissions.</span></i></div><div class="p2"><span class="Apple-style-span" style="color: #e06666;"><br /></span></div><div class="p5"><i><span class="Apple-style-span" style="color: #e06666;">But there is this small note in API description:</span></i></div><div class="p2"><span class="Apple-style-span" style="color: #e06666;"><br /></span></div><div class="p5"><i><span class="Apple-style-span" style="color: #e06666;">Note: currently this class (android.content.SharedPreferences) does not support use across multiple processes. This will be added later.</span></i></div><div class="p2"><span class="Apple-style-span" style="color: #e06666;"><br /></span></div><div class="p5"><i><span class="Apple-style-span" style="color: #e06666;">Moreover in Mark L. Murphy book "beginning Android 2" he mentioned:</span></i></div><div class="p2"><span class="Apple-style-span" style="color: #e06666;"><br /></span></div><div class="p5"><i><span class="Apple-style-span" style="color: #e06666;">(Eventually, preferences might be shareable across applications, but that is not supported as of the time of this writing)</span></i></div><div class="p2"><span class="Apple-style-span" style="color: #e06666;"><br /></span></div><div class="p5"><i><span class="Apple-style-span" style="color: #e06666;">Im so confused! does this mean that MODE_WORLD_READABLE and MODE_WORLD_WRITEABLE of getSharedPrefrences is there but NOT SUPPORTED YET in latest API level???"</span></i></div><div class="p1">Source : <a href="http://stackoverflow.com/questions/4787785/can-sharedpreferences-be-shared-among-different-android-applications"><span class="s2">Here</span></a></div><div class="p2"><br /></div><div class="p4"><b>2.2 Create object of Editor</b></div><div class="p2"><br /></div><div class="p4">Editor is interface declared inside the SharedPreference class. so that To access Editor class we need to write following syntax, "pref" is object of SharedPreference.</div><div class="p2"><br /></div><div class="p4"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">SharedPreferences.Editor edit = pref.edit();</span></div><div class="p6"><br /></div><div class="p2"><br /></div><div class="p4"><b>2.2 Put value in SharedPreference</b></div><div class="p2"><br /></div><div class="p1">The following data types are supported by the SharedPreferences class:</div><ul class="ul1"><li class="li1">Boolean values</li><li class="li1">Float values</li><li class="li1">Integer values</li><li class="li1">Long values</li><li class="li1">String values</li></ul><div class="p7">Putting value in SharedPreference using Editor object is very simple, It's same as we are using Map Collection class. Here I put one value of each data type.&nbsp;</div><div class="p6"><br /></div><div class="p1">&nbsp; &nbsp; &nbsp;<span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp; &nbsp; &nbsp;edit.putBoolean("Boolean_Value",&nbsp;true);</span></div><div class="p1"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; edit.putFloat("Float_value", 12.5F);</span></div><div class="p1"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; edit.putInt("Int_value", 500);</span></div><div class="p1"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; edit.putLong("Long_Value", 1234567890);</span></div><div class="p1"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; edit.putString("String_Value",&nbsp;"Hello SharedPreference");</span></div><div class="p2"><br /></div><div class="p1">SharedPreference is not support to put object inside it but If you can convert your object in String then It is possible. Support you want to store small image in SharedPreference then It is possible using Base64. just convert your image in Base64 and put it as String. but same technique is not possible with object of any class.</div><div class="p2"><br /></div><div class="p1"><b>2.3 Commit the values</b></div><div class="p2"><br /></div><div class="p3">Commit your preferences changes back from this Editor to the SharedPreferences object it is editing. This atomically performs the requested modifications, replacing whatever is currently in the SharedPreferences.</div><div class="p8"><br /></div><div class="p3"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;edit.commit();</span></div><div class="p2"><br /></div><div class="p1">Note&nbsp;that when two editors are modifying preferences at the same time, the last one to call commit wins.</div><div class="p2"><br /></div><div class="p1">If you don't care about the return value and you're using this from your application's main thread, consider using apply() instead.</div><div class="p2"><br /></div><div class="p1"><b>2.4 Retrieving values</b></div><div class="p2"><br /></div><div class="p2"><br /></div><div class="p1">You donâ€™t need an Editor to simply read preferences. Instead, retrieve the SharedPreferences object and use the appropriate method to retrieve a preference by name:</div><div class="p2"><br /></div><div class="p2"><br /></div><div class="p1"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-tab-span"></span>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;boolean b = pref.getBoolean("Boolean_Value",false);</span></div><div class="p1"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;float f = pref.getFloat("Float_Value", 0);</span></div><div class="p1"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;int i = pref.getInt("Int_Value", 0);</span></div><div class="p1"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;long l = pref.getLong("Long_Value", 0);</span></div><div class="p1"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;String s = pref.getString("String_Value", "");</span></div><div class="p2"><br /></div><div class="p2"><br /></div><div class="p1">Each of these methods has two parameters: the preference key string and a default value to return if the preference is undefined.</div><div class="p2"><br /></div><div class="p1"><b>2.5 Remove And Clear</b></div><div class="p2"><br /></div><div class="p1">Editor class has two method remove and clear. as name suggest it is used to remove specific key and clear is used to remove all values.</div><div class="p2"><br /></div><div class="p9"><span class="Apple-tab-span"></span>&nbsp;&nbsp; &nbsp; <span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; // Remove value</span></div><div class="p10"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; edit.remove(<span class="s3">"Boolean_Value"</span>);</span></div><div class="p10"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; edit.commit();</span></div><div class="p6"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;</span></div><div class="p9"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s4">&nbsp; &nbsp; &nbsp; &nbsp; </span>// Clear All value</span></div><div class="p10"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; edit.clear();</span></div><div class="p10"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; edit.commit();</span></div><div class="p2"><br /></div><div class="p1"><b>2.5. Full Source Code</b></div><div class="p11"><br /></div><div class="p11"><br /></div><div class="p10"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s5">package</span> com.kpbird.mysp;</span></div><div class="p6"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><br /></span></div><div class="p10"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s5">import</span> android.app.Activity;</span></div><div class="p10"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s5">import</span> android.content.SharedPreferences;</span></div><div class="p10"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s5">import</span> android.os.Bundle;</span></div><div class="p6"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><br /></span></div><div class="p10"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s5">public</span> <span class="s5">class</span> MySP <span class="s5">extends</span> Activity {</span></div><div class="p12"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s4">&nbsp; &nbsp; </span>/** Called when the activity is first created. */</span></div><div class="p13"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s4">&nbsp; &nbsp; </span>@Override</span></div><div class="p10"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; <span class="s5">public</span> <span class="s5">void</span> onCreate(Bundle savedInstanceState) {</span></div><div class="p10"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; <span class="s5">super</span>.onCreate(savedInstanceState);</span></div><div class="p10"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; setContentView(R.layout.<span class="s6">main</span>);</span></div><div class="p6"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;</span></div><div class="p9"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s4">&nbsp; &nbsp; &nbsp; &nbsp; </span>// fetch object of SharedPreference</span></div><div class="p10"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; SharedPreferences pref = getSharedPreferences(<span class="s3">"MyPref"</span>, <span class="s6">MODE_PRIVATE</span>);</span></div><div class="p9"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s4">&nbsp; &nbsp; &nbsp; &nbsp; </span>// Create object of Editor</span></div><div class="p10"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; SharedPreferences.Editor edit = pref.edit();</span></div><div class="p9"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s4">&nbsp; &nbsp; &nbsp; &nbsp; </span>// Put values&nbsp;</span></div><div class="p10"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; edit.putBoolean(<span class="s3">"Boolean_Value"</span>, <span class="s5">true</span>);</span></div><div class="p10"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; edit.putFloat(<span class="s3">"Float_value"</span>, 12.5F);</span></div><div class="p10"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; edit.putInt(<span class="s3">"Int_value"</span>, 500);</span></div><div class="p10"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; edit.putLong(<span class="s3">"Long_Value"</span>, 1234567890);</span></div><div class="p14"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s4">&nbsp; &nbsp; &nbsp; &nbsp; edit.putString(</span>"String_Value"<span class="s4">, </span>"Hello SharedPreference"<span class="s4">);</span></span></div><div class="p9"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s4">&nbsp; &nbsp; &nbsp; &nbsp; </span>// Commit the data</span></div><div class="p10"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; edit.commit();</span></div><div class="p6"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;</span></div><div class="p6"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;</span></div><div class="p9"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s4">&nbsp; &nbsp; &nbsp; &nbsp; </span>//<span class="s7">Retreive</span>&nbsp;</span></div><div class="p10"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; <span class="s5">boolean</span> <span class="s7">b</span> = pref.getBoolean(<span class="s3">"Boolean_Value"</span>,<span class="s5">false</span>);</span></div><div class="p10"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; <span class="s5">float</span> <span class="s7">f</span> = pref.getFloat(<span class="s3">"Float_Value"</span>, 0);</span></div><div class="p10"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; <span class="s5">int</span> <span class="s7">i</span> = pref.getInt(<span class="s3">"Int_Value"</span>, 0);</span></div><div class="p10"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; <span class="s5">long</span> <span class="s7">l</span> = pref.getLong(<span class="s3">"Long_Value"</span>, 0);</span></div><div class="p10"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; String <span class="s7">s</span> = pref.getString(<span class="s3">"String_Value"</span>, <span class="s3">""</span>);</span></div><div class="p6"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;</span></div><div class="p10"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; }</span></div><div class="p10"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">}</span></div><div class="p6"><br /></div><div class="p2"><br /><a name='more'></a><br /></div><div class="p1"><b>3. XML File</b></div><div class="p2"><br /></div><div class="p1">When we execute above application, Android will generate xml file named "MyPref.xml" in following path</div><div class="p1"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">/data/data/com.kpbird.mysp/shared_prefs/MyPref.xml</span></div><div class="p2"><br /></div><div class="p1">XML File content&nbsp;</div><div class="p2"><br /></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s8">&lt;?xml</span> <span class="s9">version</span>='<span class="s10">1.0</span>' <span class="s9">encoding</span>='utf-8' standalone='yes' ?<span class="s8">&gt;</span></span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s8">&lt;</span>map<span class="s8">&gt;</span></span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s8">&lt;</span>int name=<span class="s11">"Int_value"</span> value=<span class="s11">"500"</span> <span class="s8">/&gt;</span></span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s8">&lt;</span>boolean name=<span class="s11">"Boolean_Value"</span> value=<span class="s11">"true"</span> <span class="s8">/&gt;</span></span></div><div class="p16"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s8">&lt;</span><span class="s4">long name=</span>"Long_Value"<span class="s4"> value=</span>"1234567890"<span class="s4"> </span><span class="s8">/&gt;</span></span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s8">&lt;</span>string name=<span class="s11">"String_Value"</span><span class="s8">&gt;</span>Hello SharedPreference<span class="s8">&lt;/</span>string<span class="s8">&gt;</span></span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s8">&lt;</span>float name=<span class="s11">"Float_value"</span> value=<span class="s11">"12.5"</span> <span class="s8">/&gt;</span></span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s8">&lt;/</span>map<span class="s8">&gt;</span></span></div><div class="p2"><br /></div><div class="p1">XML File after remove Boolean_Value</div><div class="p2"><br /></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s8">&lt;?xml</span> <span class="s9">version</span>='<span class="s10">1.0</span>' <span class="s9">encoding</span>='utf-8' standalone='yes' ?<span class="s8">&gt;</span></span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s8">&lt;</span>map<span class="s8">&gt;</span></span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s8">&lt;</span>int name=<span class="s11">"Int_value"</span> value=<span class="s11">"500"</span> <span class="s8">/&gt;</span></span></div><div class="p16"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s8">&lt;</span><span class="s4">long name=</span>"Long_Value"<span class="s4"> value=</span>"1234567890"<span class="s4"> </span><span class="s8">/&gt;</span></span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s8">&lt;</span>string name=<span class="s11">"String_Value"</span><span class="s8">&gt;</span>Hello SharedPreference<span class="s8">&lt;/</span>string<span class="s8">&gt;</span></span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s8">&lt;</span>float name=<span class="s11">"Float_value"</span> value=<span class="s11">"12.5"</span> <span class="s8">/&gt;</span></span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s8">&lt;/</span>map<span class="s8">&gt;</span></span></div><div class="p2"><br /></div><div class="p1">XML File after clear&nbsp;</div><div class="p2"><br /></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s8">&lt;?xml</span> <span class="s9">version</span>='<span class="s10">1.0</span>' <span class="s9">encoding</span>='utf-8' standalone='yes' ?<span class="s8">&gt;</span></span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s8">&lt;</span>map <span class="s8">/&gt;</span></span></div><div class="p2"><br /></div><div class="p2"><br /></div><div class="p1"><b>4. SharedPreference In Depth</b></div><div class="p2"><br /></div><div class="p1">Above information are general usage and implementation of SharedPreference but this article is for InDepth. I am going to answer following questions.</div><div class="p2"><br /></div><div class="p1">1. When SharedPreference object create ?</div><div class="p1">2. Who create object of SharedPreference ?</div><div class="p1">3. Where getSharedPreference() is implemented ?</div><div class="p2"><br /></div><div class="p1">SharedPreference is Interface declared in android.content package. Classes and Interface Included in SharedPreference</div><div class="p2"><br /></div><div class="p1"><br /><ol style="text-align: left;"><li>SharedPerfereance - Interface</li><li>Context - Abstract Class</li><li>ContextWrapper - Class</li><li>Activity - Class</li><li>ActivityThread - final Class</li><li>ContextImpl - Class</li></ol></div><div class="p2"><br /></div><div class="p1"><b>1. SharedPreference :</b> This Interface has methods and two sub/inner Interface Editor and <span class="s12">OnSharedPreferenceChangeListener </span>All ShredPreference method are declared in this Interface&nbsp;</div><div class="p1"><b><br /></b><br /><b>2. Context :</b> This is Abstract Class. In this class getSharedPreference method is declared. getSharedPreference method is public and abstract. It also has static and final integer variable for Mode.</div><div class="p15"><span class="Apple-tab-span"> </span><span class="Apple-tab-span"> </span>&nbsp; &nbsp; <span class="s13">public</span> <span class="s13">static</span> <span class="s13">final</span> <span class="s13">int</span> MODE_PRIVATE = <span class="s14">0x0000</span>;</div><div class="p15"><span class="Apple-tab-span"> </span><span class="Apple-tab-span"> </span>&nbsp; &nbsp; <span class="s13">public</span> <span class="s13">static</span> <span class="s13">final</span> <span class="s13">int</span> MODE_WORLD_READABLE = <span class="s14">0x0001</span>;</div><div class="p15"><span class="Apple-tab-span"> </span><span class="Apple-tab-span"> </span>&nbsp; &nbsp; <span class="s13">public</span> <span class="s13">static</span> <span class="s13">final</span> <span class="s13">int</span> MODE_WORLD_WRITEABLE = <span class="s14">0x0002</span>;</div><div class="p17"><br /></div><div class="p15"><span class="s13"><span class="Apple-tab-span"> </span><span class="Apple-tab-span"> </span><span class="Apple-tab-span"> </span>public</span> <span class="s13">abstract</span> SharedPreferences getSharedPreferences(String name,<span class="s13">int</span> mode);</div><div class="p2"><br /></div><div class="p1"><b>3. ContextWrapper :</b> This class is child class of Context Class. As name suggest it wrapper all method of Context Class. No real implementation available in this class.&nbsp; Following method declared in ContextWrapper class.</div><div class="p17"><span class="Apple-tab-span"> </span><span class="Apple-tab-span"> </span><span class="Apple-tab-span"> </span></div><div class="p15"><span class="Apple-tab-span"> </span><span class="Apple-tab-span"> </span>&nbsp; &nbsp; <span class="s13">public</span> SharedPreferences getSharedPreferences(String name, <span class="s13">int</span> mode) {</div><div class="p15">&nbsp; &nbsp; &nbsp; &nbsp; <span class="Apple-tab-span"> </span><span class="Apple-tab-span"> </span><span class="s13">return</span> mBase.getSharedPreferences(name, mode);</div><div class="p15"><span class="Apple-tab-span"> </span><span class="Apple-tab-span"> </span>&nbsp; &nbsp; }</div><div class="p1"><b><br /></b><br /><div style="text-align: justify;"><b>4. Activity :</b> This class is child class of ContextThemeWrapper and ContextThemeWrapper is child class of ContextWrapper. getSharedPreference method is not implemented int this class. but It has object of ActivityThread. Activity class has method named "<span class="s12">attach" </span>Variable for Context, ActivityThread, Configuration, etc.. are pass from system. ActivityThread variable assign to mMainThread variable. attach method is call from "performLunchActivity" method of ActivityThread.</div></div><div class="p2"><br /></div><div class="p15"><span class="Apple-tab-span"> </span><span class="Apple-tab-span"> </span><span class="Apple-tab-span"> </span>ActivityThread mMainThread;<span class="s15"> &nbsp;</span></div><div class="p2"><br /></div><div class="p15"><span class="Apple-tab-span"> </span><span class="Apple-tab-span"> </span><span class="Apple-tab-span"> </span><span class="s13">final</span> <span class="s13">void</span> attach(Context context, ActivityThread aThread,</div><div class="p15">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Apple-tab-span"> </span><span class="Apple-tab-span"> </span>Instrumentation instr, IBinder token, <span class="s13">int</span> ident,</div><div class="p15">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Apple-tab-span"> </span><span class="Apple-tab-span"> </span>Application application, Intent intent, ActivityInfo info,</div><div class="p15">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Apple-tab-span"> </span><span class="Apple-tab-span"> </span>CharSequence title, Activity parent, String id,</div><div class="p15">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Apple-tab-span"> </span><span class="Apple-tab-span"> </span>Object lastNonConfigurationInstance,</div><div class="p15">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Apple-tab-span"> </span><span class="Apple-tab-span"> </span>HashMap&lt;String,Object&gt; lastNonConfigurationChildInstances,</div><div class="p15">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Apple-tab-span"> </span><span class="Apple-tab-span"> </span>Configuration config)</div><div class="p2"><br /></div><div class="p1"><b>5. ActivityThread :</b> ActivityThread is final class.&nbsp; It has object on ContextImpl class.&nbsp; ActivityThread has method named "performLunchActivity" in this method object of ContextImpl is create.</div><div class="p2"><br /></div><div class="p15"><span class="Apple-tab-span"></span><span class="Apple-tab-span"></span><span class="Apple-tab-span"></span><span class="Apple-tab-span"></span>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">ContextImpl appContext = <span class="s13">new</span> ContextImpl();</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp; &nbsp;appContext.init(r.packageInfo, r.token, <span class="s13">this</span>);</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp; &nbsp;appContext.setOuterContext(activity);</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp; &nbsp;CharSequence title = r.activityInfo.loadLabel(appContext.getPackageManager());</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp; &nbsp;Configuration config = <span class="s13">new</span> Configuration(mConfiguration);</span></div><div class="p18"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></div><div class="p18"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><br /></span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp; &nbsp;activity.attach(appContext, <span class="s13">this</span>, getInstrumentation(), r.token,</span><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">r.ident, app, r.intent, r.activityInfo, title, r.parent,</span><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">r.embeddedID, r.lastNonConfigurationInstance,</span><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">r.lastNonConfigurationChildInstances, config);</span></div><div class="p18"><br /></div><div class="p2"><br /></div><div class="p1"><b>6. ContextImpl :</b> This is child class of Context. ContextImpl class has implementation of all abstract method of Context Class. ContextImpl class has private class which implements SharedPrferenceInterface</div><div class="p2"><br /></div><div class="p15"><span class="s13">private</span> <span class="s13">static</span> <span class="s13">final</span> <span class="s13">class</span> SharedPreferencesImpl <span class="s13">implements</span> SharedPreferences&nbsp;</div><div class="p2"><br /></div><div class="p1">Here is implementation of getSharedPreferences.</div><div class="p2"><br /></div><div class="p2"><br /></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp;<span class="s13">public</span> SharedPreferences getSharedPreferences(String name, <span class="s13">int</span> mode) {</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; SharedPreferencesImpl sp;</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; File prefsFile;</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; <span class="s13">boolean</span> needInitialLoad = <span class="s13">false</span>;</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; <span class="s13">synchronized</span> (sSharedPrefs) {</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sp = sSharedPrefs.get(name);</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="s13">if</span> (sp != <span class="s13">null</span> &amp;&amp; !sp.hasFileChangedUnexpectedly()) {</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="s13">return</span> sp;</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prefsFile = getSharedPrefsFile(name);</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="s13">if</span> (sp == <span class="s13">null</span>) {</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sp = <span class="s13">new</span> SharedPreferencesImpl(prefsFile, mode, <span class="s13">null</span>);</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sSharedPrefs.put(name, sp);</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; needInitialLoad = <span class="s13">true</span>;</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></div><div class="p18"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><br /></span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; <span class="s13">synchronized</span> (sp) {</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="s13">if</span> (needInitialLoad &amp;&amp; sp.isLoaded()) {</span></div><div class="p19"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>// lost the race to load; another thread handled it</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="s13">return</span> sp;</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; File backup = makeBackupFile(prefsFile);</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="s13">if</span> (backup.exists()) {</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prefsFile.delete();</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; backup.renameTo(prefsFile);</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></div><div class="p18"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><br /></span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="s16">// Debugging</span></span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="s13">if</span> (prefsFile.exists() &amp;&amp; !prefsFile.canRead()) {</span></div><div class="p20"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="s4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Log.w(TAG, </span>"Attempt to read preferences file "<span class="s4"> + prefsFile + </span>" without permission"<span class="s4">);</span></span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></div><div class="p18"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><br /></span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Map map = <span class="s13">null</span>;</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FileStatus stat = <span class="s13">new</span> FileStatus();</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="s13">if</span> (FileUtils.getFileStatus(prefsFile.getPath(), stat) &amp;&amp; prefsFile.canRead()) {</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="s13">try</span> {</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FileInputStream str = <span class="s13">new</span> FileInputStream(prefsFile);</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; map = XmlUtils.readMapXml(str);</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; str.close();</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } <span class="s13">catch</span> (org.xmlpull.v1.XmlPullParserException e) {</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Log.w(TAG, <span class="s17">"getSharedPreferences"</span>, e);</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } <span class="s13">catch</span> (FileNotFoundException e) {</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Log.w(TAG, <span class="s17">"getSharedPreferences"</span>, e);</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } <span class="s13">catch</span> (IOException e) {</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Log.w(TAG, <span class="s17">"getSharedPreferences"</span>, e);</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sp.replace(map, stat);</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; }</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; <span class="s13">return</span> sp;</span></div><div class="p15"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;">&nbsp; &nbsp; }</span></div><div class="p2"><br /></div><div class="p1"><b>4.1 Diagram : </b>Following picture make things more clear.&nbsp;&nbsp;</div><div class="p2"><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-0AgVs6N8jx4/TbgEfAqCOFI/AAAAAAAADGE/aWKnMQp0fNg/s1600/Untitleddrawing.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="640" src="http://4.bp.blogspot.com/-0AgVs6N8jx4/TbgEfAqCOFI/AAAAAAAADGE/aWKnMQp0fNg/s640/Untitleddrawing.jpg" width="480" /></a></div><br /></div><div class="p2"><br /></div><div class="p2"><br /></div></div>