---
layout: post
title: Android Instagram Integration
date: '2013-01-17T14:19:00.000+05:30'
author: Ketan Parmar
tags:
- android sharing
- android instagram
- Android
- instagram
- android instagram sharing
modified_time: '2013-01-24T09:57:53.970+05:30'
thumbnail: http://3.bp.blogspot.com/-0rWuXW9xUJg/UPermCPeDVI/AAAAAAAADnk/f7CYSGuZIM0/s72-c/device-2013-01-17-123102.png
blogger_id: tag:blogger.com,1999:blog-17114597.post-1761151961030718859
blogger_orig_url: http://www.kpbird.com/2013/01/android-instagram-integration.html
---

<strong><b>Note:</b></strong> There is no direct api/library available to share with Instragram as per http://instagram.com/developer/<br />In this post I am using ACTION_SHARE Intent to share image to Instragram. I have&nbsp;demonstrated two ways to share image, 1. From Gallery 2. From SD Card.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-0rWuXW9xUJg/UPermCPeDVI/AAAAAAAADnk/f7CYSGuZIM0/s1600/device-2013-01-17-123102.png" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="320" src="http://3.bp.blogspot.com/-0rWuXW9xUJg/UPermCPeDVI/AAAAAAAADnk/f7CYSGuZIM0/s320/device-2013-01-17-123102.png" width="180" /></a><a href="http://2.bp.blogspot.com/-vDKuXLmfeE4/UPerl4SUgvI/AAAAAAAADng/9nkGBqAZ3j8/s1600/device-2013-01-17-123033.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="320" src="http://2.bp.blogspot.com/-vDKuXLmfeE4/UPerl4SUgvI/AAAAAAAADng/9nkGBqAZ3j8/s320/device-2013-01-17-123033.png" width="180" /></a>   <a href="http://3.bp.blogspot.com/-VzkQVOgifEU/UPermbWQhAI/AAAAAAAADno/rWkGOHkMU-c/s1600/device-2013-01-17-123052.png" imageanchor="1" style="clear: left; display: inline !important; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="320" src="http://3.bp.blogspot.com/-VzkQVOgifEU/UPermbWQhAI/AAAAAAAADno/rWkGOHkMU-c/s320/device-2013-01-17-123052.png" width="180" /></a></div><br /><b>Step 1 : </b>Create Android Project in Eclipse, named "AndroidInstragramDemo"<br /><b>Step 2 :</b> Open activity_main.xml file and add two buttons for gallery and sd card.<br /><pre class="brush:xml">&lt;RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"<br />    xmlns:tools="http://schemas.android.com/tools"<br />    android:layout_width="match_parent"<br />    android:layout_height="match_parent"<br />    tools:context=".MainActivity" &gt;<br /><br />    &lt;Button<br />        android:id="@+id/btngallery"<br />        android:layout_width="wrap_content"<br />        android:layout_height="wrap_content"<br />        android:layout_alignParentLeft="true"<br />        android:layout_alignParentRight="true"<br />        android:layout_alignParentTop="true"<br />        android:onClick="buttonClicked"<br />        android:text="Share from Gallery" /&gt;<br /><br />    &lt;Button<br />        android:id="@+id/btnsdcard"<br />        android:layout_width="wrap_content"<br />        android:layout_height="wrap_content"<br />        android:layout_alignParentLeft="true"<br />        android:layout_alignParentRight="true"<br />        android:layout_below="@+id/btngallery"<br />        android:onClick="buttonClicked"<br />        android:text="Share from SD Card" /&gt;<br /><br />&lt;/RelativeLayout&gt;</pre><b><strong><span style="font-family: inherit;">Step 3 : </span></strong></b>Open MainActivity.java file and write following code.<br /><pre class="brush:java">package com.kpbird.androidinstagramdemo;<br /><br />import java.util.List;<br /><br />import android.app.Activity;<br />import android.content.ComponentName;<br />import android.content.Intent;<br />import android.content.pm.ActivityInfo;<br />import android.content.pm.ApplicationInfo;<br />import android.content.pm.PackageManager;<br />import android.content.pm.ResolveInfo;<br />import android.net.Uri;<br />import android.os.Bundle;<br />import android.os.Environment;<br />import android.view.View;<br />import android.widget.Toast;<br /><br />public class MainActivity extends Activity {<br /><br /> @Override<br /> protected void onCreate(Bundle savedInstanceState) {<br />  super.onCreate(savedInstanceState);<br />  setContentView(R.layout.activity_main);<br /> }<br /><br /> // Listener for Button Clicked - Defined in button:onClilck property<br /> public void buttonClicked(View v) {<br /><br />  // Let's check Instagram is installed or not<br />  if (!appInstalledOrNot()) {<br />   Toast.makeText(this, "Instagram Application is not installed",Toast.LENGTH_LONG).show();<br />   return;<br />  }<br /><br />  if (v.getId() == R.id.btngallery) {<br />   shareFromGallery(); // share image from gallery<br /><br />  } else if (v.getId() == R.id.btnsdcard) {<br />   shareFromSDCard(); // share image from sdcard<br />  }<br /> }<br /><br /> // This method use PackageManager Class to check for instagram package.<br /> private boolean appInstalledOrNot() {<br /><br />  boolean app_installed = false;<br />  try {<br />   ApplicationInfo info = getPackageManager().getApplicationInfo("com.instagram.android", 0);<br />   app_installed = true;<br />  } catch (PackageManager.NameNotFoundException e) {<br />   app_installed = false;<br />  }<br />  return app_installed;<br /> }<br /> <br /> // This method invoke gallery or any application which support image/* mime type <br /> private void shareFromGallery(){<br />  Intent intent = new Intent();<br />  intent.setType("image/*");<br />  intent.setAction(Intent.ACTION_GET_CONTENT);<br />  startActivityForResult(Intent.createChooser(intent, "Select Picture"), 0);<br /> }<br /> // this method share test.jpg file from sd card <br /> private void shareFromSDCard(){<br />  shareInstagram(Uri.parse("file://"+Environment.getExternalStorageDirectory()+"/test.jpg"));<br /> }<br /> <br /> @Override<br /> protected void onActivityResult(int requestCode, int resultCode, Intent data) {<br />   Uri uri = data.getData();<br />   shareInstagram(uri);<br /> }<br /> <br /> // this mathod actually share image to Instagram, It accept Uri <br /> private void shareInstagram(Uri uri){<br />   Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);<br /> shareIntent.setType("image/*"); // set mime type <br /> shareIntent.putExtra(Intent.EXTRA_STREAM,uri); // set uri <br /> shareIntent.setPackage("com.instagram.android");<br /> startActivity(shareIntent);<br /> }<br />}<br /></pre><br />There are two methods to set package name<br /><b>Method 1 :</b> Optimized and Clean<br /><pre class="brush:java">private void shareInstagram(Uri uri){<br />  Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);<br />  shareIntent.setType("image/*"); // set mime type <br />  shareIntent.putExtra(Intent.EXTRA_STREAM,uri); // set uri <br />  shareIntent.setPackage("com.instagram.android");<br />  startActivity(shareIntent);<br /> }<br /></pre><br /><b>Method 2 : </b>Loop for select package<br /><pre class="brush:java">private void shareInstagram(Uri uri){<br />  // Intent for action_send  <br />  Intent shareIntent = new Intent(android.content.Intent.ACTION_SEND);<br />  shareIntent.setType("image/*"); // set mime type <br />  shareIntent.putExtra(Intent.EXTRA_STREAM,uri); // set uri <br />  <br />  //following logic is to avoide option menu, If you remove following logic then android will display list of application which support image/* mime type<br />  PackageManager pm = getPackageManager();<br />  List&lt;ResolveInfo&gt; activityList = pm.queryIntentActivities(shareIntent, 0);<br />  for (final ResolveInfo app : activityList) {<br />      if ((app.activityInfo.name).contains("instagram")) { // search for instagram from app list<br />          final ActivityInfo activity = app.activityInfo;<br />          final ComponentName name = new ComponentName(activity.applicationInfo.packageName, activity.name); <br />          shareIntent.addCategory(Intent.CATEGORY_LAUNCHER);<br />          shareIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |             Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);<br />          shareIntent.setComponent(name); // set component <br />          startActivity(shareIntent);<br />          break;<br />     }<br />  }<br /> }<br /></pre>I assume that It is very simple code and It does not require&nbsp;explanation.<br /><span id="goog_1396594148"></span><br /><strong><b>Note:</b></strong><br /><ul><li>We can not check login status of user.</li><li>We can't have share status whether user has actually share image or not</li><li>After image share Instagram App remain on Screen, User need to press back button display our app.</li></ul><span style="font-family: inherit; font-size: large;"><a href="https://docs.google.com/file/d/0B9CK0aNgCtjRdFhjckpBeEJJZ2c/edit" target="_blank">Download Source Code</a></span><br />[To Download : Click File Menu -&gt; Download]<br /><a href="https://github.com/kpbird/android-instagram-integration" target="_blank"><span style="font-size: large;">Source from Github</span></a>