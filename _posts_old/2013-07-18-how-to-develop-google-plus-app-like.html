---
layout: post
title: How to develop google plus app like bottom menu ?
date: '2013-07-18T23:18:00.000+05:30'
author: Ketan Parmar
tags:
- bottom menu
- animation
- google plus
modified_time: '2014-04-26T13:51:53.544+05:30'
thumbnail: http://3.bp.blogspot.com/-eWicVPSTj_s/UefIMcYJFVI/AAAAAAAAEJ4/TZHslx4AigM/s72-c/Image-1.png
blogger_id: tag:blogger.com,1999:blog-17114597.post-2886970155064390672
blogger_orig_url: http://www.kpbird.com/2013/07/how-to-develop-google-plus-app-like.html
---

<div style="text-align: justify;"><span style="font-family: Verdana, sans-serif;">How to develop Google+ app like bottom menu ?</span><br /><span style="font-family: Verdana, sans-serif;">Google+ app detects scroll direction to maintain visibility of bottom menu bar. When user scroll up content, bottom menu will hide with animation so that user can see the new item coming up from the bottom. When user scroll down, bottom menu bar will visible so that user can access menus available in bottom menu bar.</span></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><span style="font-family: Verdana, sans-serif;">We can achieve same functionality using Animation, Fragment as bottom menu bar and onscrolllistener event of ListView.&nbsp;</span></div><div style="text-align: justify;"><span style="font-family: Verdana, sans-serif;"><br /></span></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-eWicVPSTj_s/UefIMcYJFVI/AAAAAAAAEJ4/TZHslx4AigM/s1600/Image-1.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-eWicVPSTj_s/UefIMcYJFVI/AAAAAAAAEJ4/TZHslx4AigM/s320/Image-1.png" height="320" width="180" /></a></div>&nbsp;<a href="http://3.bp.blogspot.com/-SO96v97LpLc/UefIMQHWT1I/AAAAAAAAEJ8/QJS6uhNZTAw/s1600/Image-2.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em; text-align: center;"><img border="0" src="http://3.bp.blogspot.com/-SO96v97LpLc/UefIMQHWT1I/AAAAAAAAEJ8/QJS6uhNZTAw/s320/Image-2.png" height="320" width="180" /></a><br /><span style="font-family: Verdana, sans-serif;"><br /></span><span style="font-family: Verdana, sans-serif;"><b>Step 1:</b> Create Android Project in your favourite IDE</span><br /><span style="font-family: Verdana, sans-serif;"><br /></span><span style="font-family: Verdana, sans-serif;"><b>Step 2:</b>&nbsp;</span><span style="font-family: Verdana, sans-serif;">Create Fragment for Bottom Menu,&nbsp;</span><br /><ul><li><span style="font-family: Verdana, sans-serif;">Create new java file named "BottomFragmentMenu.java"</span></li><li><span style="font-family: Verdana, sans-serif;">Create new layout named "bottom_menu.xml" for the bottom menu fragment</span></li><li><span style="font-family: Verdana, sans-serif;">Implement onCreateView method in BottomFragmentMenu.java and inflate bottom_menu.xml</span></li><li><span style="font-family: Verdana, sans-serif;">Fetch ImageButton object from the view</span></li><li><span style="font-family: Verdana, sans-serif;">Implement and set click listener of buttons</span></li></ul><div style="text-align: justify;"><span style="font-family: Verdana, sans-serif;"><u>BottomFragmentMenu.java</u></span></div><pre class="brush:java">package com.kpbird.bottommenubar;<br /><br />import android.app.Fragment;<br />import android.os.Bundle;<br />import android.view.LayoutInflater;<br />import android.view.View;<br />import android.view.View.OnClickListener;<br />import android.view.ViewGroup;<br />import android.widget.ImageButton;<br />import android.widget.Toast;<br /><br />public class BottomMenuFragment extends Fragment implements OnClickListener {<br /><br /> @Override<br /> public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {<br />  View view = inflater.inflate(R.layout.bottom_menu, container,false);<br />  ImageButton b1 =(ImageButton)view.findViewById(R.id.imageButton1);<br />  ImageButton b2 =(ImageButton)view.findViewById(R.id.imageButton2);<br />  ImageButton b3 =(ImageButton)view.findViewById(R.id.imageButton3);<br />  ImageButton b4 =(ImageButton)view.findViewById(R.id.imageButton4);<br /><br />  b1.setOnClickListener(this);<br />  b2.setOnClickListener(this);<br />  b3.setOnClickListener(this);<br />  b4.setOnClickListener(this);<br />  <br />  return view;<br /> }<br /><br /> @Override<br /> public void onClick(View v) {<br />  switch(v.getId()){<br />  case R.id.imageButton1:<br />   Toast.makeText(getActivity() ,"Button 1 clicked", Toast.LENGTH_LONG).show();<br />   break;<br />  case R.id.imageButton2:<br />   Toast.makeText(getActivity() ,"Button 2 clicked", Toast.LENGTH_LONG).show();<br />   break;<br />  case R.id.imageButton3:<br />   Toast.makeText(getActivity() ,"Button 3 clicked", Toast.LENGTH_LONG).show();<br />   break;<br />  case R.id.imageButton4:<br />   Toast.makeText(getActivity() ,"Button 4 clicked", Toast.LENGTH_LONG).show();<br />   break;<br />  }<br /> }<br />}<br /></pre><div style="text-align: justify;"><span style="font-family: Verdana, sans-serif;"><u>bottom_menu.xml</u></span></div><pre class="brush:xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;<br />&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"<br />    android:layout_width="match_parent"<br />    android:layout_height="wrap_content"<br />    android:background="#80666666"<br />    android:gravity="center_horizontal"<br />    android:orientation="horizontal" &gt;<br /><br />    &lt;ImageButton<br />        android:id="@+id/imageButton1"<br />        android:layout_width="wrap_content"<br />        android:layout_height="wrap_content"<br />        android:background="@null"<br />        android:layout_margin="5dp"<br />        android:src="@drawable/button1" /&gt;<br /><br />    &lt;ImageButton<br />        android:id="@+id/imageButton2"<br />        android:layout_width="wrap_content"<br />        android:layout_height="wrap_content"<br />        android:background="@null"<br />        android:layout_margin="5dp"<br />        android:src="@drawable/button2" /&gt;<br /><br />    &lt;ImageButton<br />        android:id="@+id/imageButton3"<br />        android:layout_width="wrap_content"<br />        android:layout_height="wrap_content"<br />        android:background="@null"<br />        android:layout_margin="5dp"<br />        android:src="@drawable/button3" /&gt;<br /><br />    &lt;ImageButton<br />        android:id="@+id/imageButton4"<br />        android:layout_width="wrap_content"<br />        android:layout_height="wrap_content"<br />        android:background="@null"<br />        android:layout_margin="5dp"<br />        android:src="@drawable/button4" /&gt;<br /><br />&lt;/LinearLayout&gt;<br /></pre><div style="text-align: justify;"><span style="font-family: Verdana, sans-serif;"><br /></span></div><div style="text-align: justify;"><span style="font-family: Verdana, sans-serif;"><b>Step 3:</b> Create Animation for Bottom Menu, we require two animations 1 entry.xml and 2. exit.xml respectively for to make fragment visible and hide. It's very simple Object Animator with translationY property, If you are developing app for Android 2.3, you can use translate animation.&nbsp;</span></div><div style="text-align: justify;"><span style="font-family: Verdana, sans-serif;"><br /></span></div><div style="text-align: justify;"><span style="font-family: Verdana, sans-serif;"><u>entry.xml</u></span></div><pre class="brush:xml">&lt;objectAnimator<br />    xmlns:android="http://schemas.android.com/apk/res/android"<br />    android:interpolator="@android:interpolator/linear"<br />    android:valueFrom="100"<br />    android:valueTo="0"<br />    android:propertyName="translationY"<br />    android:duration="@android:integer/config_shortAnimTime" /&gt;<br /></pre><div style="text-align: justify;"><span style="font-family: Verdana, sans-serif;"><br /></span></div><div style="text-align: justify;"><span style="font-family: Verdana, sans-serif;"><u>exit.xml</u></span></div><pre class="brush:xml">&lt;?xml version="1.0" encoding="utf-8" ?&gt;<br />&lt;objectAnimator<br />    xmlns:android="http://schemas.android.com/apk/res/android"<br />    android:interpolator="@android:interpolator/linear"<br />    android:valueFrom="0"<br />    android:valueTo="100"<br />    android:propertyName="translationY"<br />    android:duration="@android:integer/config_shortAnimTime"/&gt;<br /><br /></pre><div style="text-align: justify;"><span style="font-family: Verdana, sans-serif;"><br /></span></div><span style="font-family: Verdana, sans-serif;"><b>Step 4:</b> Let's modify activity_main.xml and &nbsp;MainActivity.java files to have real action.</span><br /><ul><li style="text-align: justify;"><span style="font-family: Verdana, sans-serif;">Open activity_main.xml and add ListView (with match_parent height and width) and add fragment (with match_parent width, wrap_content hight and align parent bottom).</span></li><li style="text-align: justify;"><span style="font-family: Verdana, sans-serif;">Open MainActivity.java and populate ListView with countries, In this example I am using ArrayAdapter and String Array (from strings.xml).</span></li><li style="text-align: justify;"><span style="font-family: Verdana, sans-serif;">Implement OnScrollListener of ListView, In onScroll method we just need to calculate whether user fling down or up, We need to hide bottom fragment when user scroll down and visible when user scroll up.</span></li></ul><div><span style="font-family: Verdana, sans-serif;"><u>MainActivity.java</u></span></div><pre class="brush:java">package com.kpbird.bottommenubar;<br /><br />import android.app.Activity;<br />import android.app.FragmentTransaction;<br />import android.os.Bundle;<br />import android.util.Log;<br />import android.widget.AbsListView;<br />import android.widget.AbsListView.OnScrollListener;<br />import android.widget.ArrayAdapter;<br />import android.widget.ListView;<br /><br />public class MainActivity extends Activity implements OnScrollListener{<br /><br /> private String TAG = this.getClass().getSimpleName();<br /> private ListView listview;<br /> private BottomMenuFragment bmfragment;<br /> private int lastposition;<br /> @Override<br /> protected void onCreate(Bundle savedInstanceState) {<br />  super.onCreate(savedInstanceState);<br />  setContentView(R.layout.activity_main);<br />  <br />  listview = (ListView) findViewById(R.id.listview);<br />  String[] countries = getResources().getStringArray(R.array.countries_array);<br />  ArrayAdapter&lt;String&gt; aa = new ArrayAdapter&lt;String&gt;(this, android.R.layout.simple_list_item_1, countries);<br />  listview.setAdapter(aa);<br />  listview.setOnScrollListener(this);<br />  <br />  bmfragment = (BottomMenuFragment) getFragmentManager().findFragmentById(R.id.fragment_bottom_menu);<br />  <br /> }<br /> @Override<br /> public void onScroll(AbsListView view, int firstVisibleItem,int visibleItemCount, int totalItemCount) {<br />   int currentPosition = view.getFirstVisiblePosition();<br />         if(currentPosition &gt; lastposition) {<br />             //scroll down<br />          Log.i(TAG,"on Scroll Down");<br />          FragmentTransaction ft = getFragmentManager().beginTransaction();<br />          ft.setCustomAnimations(R.animator.enter, R.animator.exit);<br />       ft.hide(bmfragment);<br />       ft.commit();<br />         }<br />         if(currentPosition &lt; lastposition) {<br />             //scroll up<br />          Log.i(TAG,"on Scroll Up");<br />          FragmentTransaction ft = getFragmentManager().beginTransaction();<br />          ft.setCustomAnimations(R.animator.enter, R.animator.exit);<br />       ft.show(bmfragment);<br />       ft.commit();<br />         }<br />         lastposition = currentPosition;<br /> }<br /> @Override<br /> public void onScrollStateChanged(AbsListView view, int scrollState) {<br />  <br /> }<br />}<br /><br /></pre><span style="font-family: Verdana, sans-serif;"><a href="https://github.com/kpbird/BottomMenuBar"><b>Download Source from Github.com</b></a></span><br /><br /><br /><br />