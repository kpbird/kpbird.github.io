---
layout: post
title: 'Android: WebView, Detect HTML Element on Click'
date: '2011-04-29T10:41:00.000+05:30'
author: Ketan Parmar
tags:
- WebView
- Android
modified_time: '2011-04-29T10:41:54.295+05:30'
blogger_id: tag:blogger.com,1999:blog-17114597.post-2996838261865710702
blogger_orig_url: http://www.kpbird.com/2011/04/android-webview-detect-html-element-on.html
---

<div dir="ltr" style="text-align: left;" trbidi="on">Android WebView allow us to display web pages inside the application. Also allowed to&nbsp; interact with web  content, there are several reasons that you might want to use WebView in  your applications. It is powerful enough to execute JavaScript. It allow us to load HTML content as String and also display Web Page from domain/URL.<br /><br />Here I am going to teach you how to detect user's action. Suppose you want to take specific action when user click on image or button or link then it is possible.<br /><br />We can detect following HTML elements as per Android API Document.<br /><br /><table class="jd-sumtable" id="constants"><tbody><tr class="alt-color api apilevel-1"><td class="jd-typecol">int</td>         <td class="jd-linkcol"><a href="http://developer.android.com/reference/android/webkit/WebView.HitTestResult.html#ANCHOR_TYPE">ANCHOR_TYPE</a></td>         <td class="jd-descrcol" width="100%">HitTestResult for hitting a HTML::a tag </td>     </tr><tr class=" api apilevel-1">         <td class="jd-typecol">int</td>         <td class="jd-linkcol"><a href="http://developer.android.com/reference/android/webkit/WebView.HitTestResult.html#EDIT_TEXT_TYPE">EDIT_TEXT_TYPE</a></td>         <td class="jd-descrcol" width="100%">HitTestResult for hitting an edit text area </td>     </tr><tr class="alt-color api apilevel-1">         <td class="jd-typecol">int</td>         <td class="jd-linkcol"><a href="http://developer.android.com/reference/android/webkit/WebView.HitTestResult.html#EMAIL_TYPE">EMAIL_TYPE</a></td>         <td class="jd-descrcol" width="100%">HitTestResult for hitting an email address </td>     </tr><tr class=" api apilevel-1">         <td class="jd-typecol">int</td>         <td class="jd-linkcol"><a href="http://developer.android.com/reference/android/webkit/WebView.HitTestResult.html#GEO_TYPE">GEO_TYPE</a></td>         <td class="jd-descrcol" width="100%">HitTestResult for hitting a map address </td>     </tr><tr class="alt-color api apilevel-1">         <td class="jd-typecol">int</td>         <td class="jd-linkcol"><a href="http://developer.android.com/reference/android/webkit/WebView.HitTestResult.html#IMAGE_ANCHOR_TYPE">IMAGE_ANCHOR_TYPE</a></td>         <td class="jd-descrcol" width="100%">HitTestResult for hitting a HTML::a tag which contains HTML::img </td>     </tr><tr class=" api apilevel-1">         <td class="jd-typecol">int</td>         <td class="jd-linkcol"><a href="http://developer.android.com/reference/android/webkit/WebView.HitTestResult.html#IMAGE_TYPE">IMAGE_TYPE</a></td>         <td class="jd-descrcol" width="100%">HitTestResult for hitting an HTML::img tag </td>     </tr><tr class="alt-color api apilevel-1">         <td class="jd-typecol">int</td>         <td class="jd-linkcol"><a href="http://developer.android.com/reference/android/webkit/WebView.HitTestResult.html#PHONE_TYPE">PHONE_TYPE</a></td>         <td class="jd-descrcol" width="100%">HitTestResult for hitting a phone number </td>     </tr><tr class=" api apilevel-1">         <td class="jd-typecol">int</td>         <td class="jd-linkcol"><a href="http://developer.android.com/reference/android/webkit/WebView.HitTestResult.html#SRC_ANCHOR_TYPE">SRC_ANCHOR_TYPE</a></td>         <td class="jd-descrcol" width="100%">HitTestResult for hitting a HTML::a tag with src=http </td>     </tr><tr class="alt-color api apilevel-1">         <td class="jd-typecol">int</td>         <td class="jd-linkcol"><a href="http://developer.android.com/reference/android/webkit/WebView.HitTestResult.html#SRC_IMAGE_ANCHOR_TYPE">SRC_IMAGE_ANCHOR_TYPE</a></td>         <td class="jd-descrcol" width="100%">HitTestResult for hitting a HTML::a tag with src=http + HTML::img </td>     </tr><tr class=" api apilevel-1">         <td class="jd-typecol">int</td>         <td class="jd-linkcol"><a href="http://developer.android.com/reference/android/webkit/WebView.HitTestResult.html#UNKNOWN_TYPE">UNKNOWN_TYPE</a></td>         <td class="jd-descrcol" width="100%">Default HitTestResult, where the target is unknown </td></tr></tbody></table>&nbsp;<br />Src : <a href="http://developer.android.com/reference/android/webkit/WebView.HitTestResult.html">http://developer.android.com/reference/android/webkit/WebView.HitTestResult.html </a><br /><br />Here are many HTML element missing. like RadioButton, CheckBox etc.. I can not detect radio button or check box click event.<br /><br /><a name='more'></a><br /><br />Here I assume that you are Android programmer and you know how to create projects.<br /><br />1. Create Project named "MyWebView"<br />2. Package Name "com.kpbird.mywebview"<br />3. Activity Name "MyWebView"<br />4. Edit&nbsp; MyWebView.java , main.xml and AndroidManifest.xml<br /><br /><br /><b>MyWebView.java</b><br /><br />In following I have implemented onTouchListener. when user click on WebView this event will call. In setOnTouchListener function I have created object of View.OnTouchListener interface.<br />WebView has inner class named "HitTestResult". HitTestResult class will help us to find the HTML element which press when user click on WebView.<br /><br />HitTestResult class has only two method.<br /><br /><ol style="text-align: left;"><li>getExtra() : It return String. String has HTML element which is clicked by user</li><li>getType() : It return integer. It is used to identify which HTML element is clicked by user. </li></ol>In following code I have print getExtra() and getType() value in LogCat.<br /><br />package com.kpbird.mywebview;<br /><br />import android.app.Activity;<br />import android.os.Bundle;<br />import android.util.Log;<br />import android.view.MotionEvent;<br />import android.view.View;<br />import android.webkit.WebView;<br />import android.webkit.WebViewClient;<br />import android.widget.RadioButton;<br /><br />public class MyWebView extends Activity {<br />&nbsp;&nbsp;&nbsp; /** Called when the activity is first created. */<br />&nbsp;&nbsp;&nbsp; String TAG = this.getClass().getSimpleName();<br />&nbsp;&nbsp;&nbsp; WebView wv;<br />&nbsp;&nbsp;&nbsp; @Override<br />&nbsp;&nbsp;&nbsp; public void onCreate(Bundle savedInstanceState) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; super.onCreate(savedInstanceState);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; setContentView(R.layout.main);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wv = (WebView) findViewById(R.id.MyWebView);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wv.getSettings().setJavaScriptEnabled(true);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; wv.setWebViewClient(new VideoWebViewClient());<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; wv.getSettings().setUserAgentString("Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)");<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wv.loadUrl("http://www.w3schools.com/html/tryit.asp?filename=tryhtml_form_radio");<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; wv.setOnTouchListener(new View.OnTouchListener() {<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; public boolean onTouch(View v, MotionEvent event) {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WebView.HitTestResult hr = ((WebView)v).getHitTestResult();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br /><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Log.i(TAG, "getExtra = "+ hr.getExtra() + "\t\t Type=" + hr.getType());</b><br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return false;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; });<br />&nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; private class VideoWebViewClient extends WebViewClient {<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; @Override<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public boolean shouldOverrideUrlLoading(WebView view, String url) {<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; view.loadUrl(url);<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br /><br />&nbsp;&nbsp;&nbsp; }<br /><br />}<br /><br /><b>Main.xml</b><br /><br />Add WebView XML tag in main.xml.<b> </b><br /><br />&lt;?xml version="1.0" encoding="utf-8"?&gt;<br />&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"<br />&nbsp;&nbsp;&nbsp; android:orientation="vertical"<br />&nbsp;&nbsp;&nbsp; android:layout_width="fill_parent"<br />&nbsp;&nbsp;&nbsp; android:layout_height="fill_parent"<br />&nbsp;&nbsp;&nbsp; &gt;<br />&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp; <b>&lt;WebView android:id="@+id/MyWebView" android:layout_width="fill_parent" android:layout_height="fill_parent" /&gt;</b><br /><br />&lt;/LinearLayout&gt;<br /><br /><br /><b>AndroidManifest.xml</b><br /><br />Add User Permission for INTERNET. <br /><br />&lt;?xml version="1.0" encoding="utf-8"?&gt;<br />&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; package="com.kpbird.mywebview"<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; android:versionCode="1"<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; android:versionName="1.0"&gt;<br /><b>&lt;uses-permission android:name="android.permission.INTERNET"&gt;&lt;/uses-permission&gt;</b><br /><br /><br />&nbsp;&nbsp;&nbsp; &lt;application android:icon="@drawable/icon" android:label="@string/app_name"&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;activity android:name=".MyWebView"<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; android:label="@string/app_name" android:screenOrientation="portrait"&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;intent-filter&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;action android:name="android.intent.action.MAIN" /&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;category android:name="android.intent.category.LAUNCHER" /&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/intent-filter&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/activity&gt;<br /><br />&nbsp;&nbsp;&nbsp; &lt;/application&gt;<br />&lt;/manifest&gt;<br /><br /><br /><br /></div>