<!doctype html>
<html lang="en-US">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <title>Sony SmartWatch App Development 3</title>
    

    <meta content="Sony SmartWatch App Development 3" property="og:title">
    <meta content="Sony SmartWatch App Development 3" name="twitter:title">
    <meta content="Software developer, trainer, speaker and more by Ketan Parmar" property="og:site_name">
    <meta content="Ketan Parmar is a software developer, trainer, speaker." name="description">
    <meta content="Ketan Parmar is a software developer, trainer, speaker." property="og:description">
    <meta content="Ketan Parmar is a software developer, trainer, speaker." name="twitter:description">


    <meta name="Author" content="Ketan Parmar" />
    <link href="https://plus.google.com/+KetanParmar/posts" rel="author">
    <meta content="@kpbird" name="twitter:site">
    <meta content="@kpbird" name="twitter:creator">

    <link href="/atom.xml" rel="alternate" title="Atom" type="application/atom+xml">
    <link href="/sitemap.xml" rel="sitemap" title="Sitemap" type="application/xml">
    <link href="http://kpbird.com/2013/12/sony-smartwatch-app-development-3" rel="canonical">
    <meta content="article" property="og:type">
    <meta content="summary" name="twitter:card">
    <meta content="http://kpbird.com/2013/12/sony-smartwatch-app-development-3" property="og:url">
    <meta content="http://kpbird.com/2013/12/sony-smartwatch-app-development-3" name="twitter:url"> 
    <meta content="2013-12-06T21:50:00+05:30" property="article:published_time">
    <meta content="http://kpbird.com/index.html#about" property="article:author"> 
    
    
    <meta property="og:image" content="http://kpbird.com/assets/images/posts//sonysmartwatch2trio.jpg">
    <meta name="twitter:image:src" content="http://kpbird.com/assets/images/posts//sonysmartwatch2trio.jpg">  
    <meta property="article:section" content="smartwatch">   
    <meta property="article:tag" content="Android,SmartWatch,">
    <meta property="article:tag" content="Sony"> 
    <!--[if lt IE 9]>
    <script type="text/javascript" src="assets/plugins/lt-ie9/html5.js"></script>
    <script type="text/javascript" src="assets/plugins/lt-ie9/respond.min.js"></script>
    <script type="text/javascript" src="assets/plugins/lt-ie9/excanvas.compiled.js"></script>
    <![endif]-->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700,800|Dosis:300,400" rel="stylesheet" type="text/css" />
    <link href="/../assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="/../assets/plugins/font-awesome/css/font-awesome.css" rel="stylesheet" type="text/css" />
    <link href="/../assets/plugins/font-linecons/linecons.css" rel="stylesheet" type="text/css" />
    <link href="/../assets/css/superslides.css" rel="stylesheet" type="text/css" />
    <link href="/../assets/css/owl.carousel.css" rel="stylesheet" type="text/css" />
    <link href="/../assets/plugins/magnific-popup/magnific-popup.css" rel="stylesheet" type="text/css" />
    <link href="/../assets/css/reset.css" rel="stylesheet" type="text/css" />
    <link href="/../assets/css/framework.css" rel="stylesheet" type="text/css" />
    <link href="/../assets/css/typography.css" rel="stylesheet" type="text/css" />
    <link href="/../assets/css/layout.css" rel="stylesheet" type="text/css" />
    <link href="/../assets/css/blog.css" rel="stylesheet" type="text/css" />
    <link href="/../assets/css/color/blue.css" rel="stylesheet" type="text/css" />
    <link href="/../assets/css/syntax.css" rel="stylesheet" type="text/css" />
    <link rel="shortcut icon" href="/../assets/images/favicon.png" type="image/x-icon" />
    <link rel="icon" href="/../assets/images/favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="/../assets/images/favicon.ico" type="image/x-icon" />
    <meta name="viewport" content="width=device-width, maximum-scale=1, initial-scale=1, user-scalable=0" />
    <script type="text/javascript" src="/../assets/plugins/modernizr.min.js"></script>
   
</head>


<body>
    <div class="inner-cover blog-header" style="background-image:url('/../assets/images/preview/slider/blog.png')">
    <div class="text-center">
        <h1 class="big-title">Blog</h1>
        <p>Share your knowledge. It’s a way to achieve immortality. - Dalai Lama</p>
    </div>
</div>
<header id="header">
    <nav class="navbar navbar-inverse" role="navigation"><!-- add "wihite" class for white nav bar -->
    <div class="container">
        <!-- Mobile Menu Button -->
        <button id="mobileMenu" class="fa fa-bars" type="button" data-toggle="collapse" data-target=".navbar-collapse"></button>
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <a class="navbar-brand" href="/index.html">
            <span class="">Ketan Parmar</span>
            </a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/index.html#home">Home</a></li>
                <li><a href="/index.html#about">About</a></li>
                <li><a href="/index.html#skills">Skills</a></li>
                <li class="active"><a href="/blog">Blog</a></li>
                <li><a href="/index.html#contact">Contact</a></li>
            </ul>
            </div>
        </div>
    </nav>
</header>
    <section id="blog">
        <article class="container">
            <div class="row">
                <div class="left col-md-9">
                    <header>
                        <h1>Sony SmartWatch App Development 3</h1>
                        <small class="fsize13">
                            <a href="/2013/12/sony-smartwatch-app-development-3" class="label label-default light"><i class="fa fa-dot-circle-o"></i> smartwatch</a>
                            <a href="/2013/12/sony-smartwatch-app-development-3#disqus_thread" class="label label-default light">0 Comments</a>
                            <span class="label label-default light">6 December 2013</span>
                        </small>
                    </header>

                    <p>Sony SmartWatch App Development 3</p>

<p><img src="http://4.bp.blogspot.com/-8M7znWZHNw0/UrLyBfGpvAI/AAAAAAAAEq0/dIdN06TjKC4/s400/sonysmartwatch2trio.jpg" alt=""></p>

<p>In previous two articles I covered development environment setup and&nbsp;anatomy of SmartWatch. This article will contain deep dive into coding with simple Hello Word example.</p>

<p>This demo will cover Notification API only. We will develop a single Android project named &quot;Hello SmartWatch&quot; which acts as a Host application and Extension application both. It means I will use single codebase for both things. Hello SmartWatch project has an Activity to send and clear notification to SmartWatch.&nbsp;</p>

<p>I assume that you have already imported SmartExtensionAPI and SmartExtensionUtils libraries in workspace.</p>

<p>Let&#39;s jump to the code.  </p>

<p><strong>List of Classes and purpose</strong>  </p>

<ul>
<li><strong>MainActivity.java:</strong> It is use to generate and clear notification.</li>
<li><strong>HelloExtensionReceiver.java:</strong> It receives input event generated by SmartWatch and forward control to the Extension Service.</li>
<li><strong>HelloExtensionService.java:</strong> core logic of Host application needs to be written in ExtensionService. It is also responsible to register a host application to SmartWatch.</li>
<li><strong>HelloRegistrationInformation.java:</strong> It provides essential&nbsp;information to register host application and API requirement.&nbsp;</li>
</ul>

<p>This demo application contains only above four classes but actual application may have more classes. In above classes MainActivity acts as a Smart Extension application and rest of classes acts as a Host application.  </p>

<p><strong>Step 1:</strong> Create new Android project in eclipse named &quot;HelloSmartWatch&quot;.<br>
<strong>Step 2:</strong> Let&#39;s create UI first. Open activity_main.xml and put two EditText box for Title and Message respectively and two buttons for Send and Clear notification respectively.  </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&lt;linearlayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:orientation=&quot;vertical&quot; android:paddingbottom=&quot;@dimen/activity_vertical_margin&quot; android:paddingleft=&quot;@dimen/activity_horizontal_margin&quot; android:paddingright=&quot;@dimen/activity_horizontal_margin&quot; android:paddingtop=&quot;@dimen/activity_vertical_margin&quot; tools:context=&quot;.MainActivity&quot;&gt;

    &lt;textview android:id=&quot;@+id/textView1&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:gravity=&quot;center_horizontal&quot; android:text=&quot;Send Notification&quot; android:textappearance=&quot;?android:attr/textAppearanceLarge&quot;&gt;

    &lt;edittext android:id=&quot;@+id/etTitle&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:ems=&quot;10&quot; android:hint=&quot;Title&quot;&gt;
    &lt;/edittext&gt;

    &lt;edittext android:id=&quot;@+id/etMessage&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:ems=&quot;10&quot; android:hint=&quot;Message&quot;&gt;
    &lt;/edittext&gt;

    &lt;button android:id=&quot;@+id/btnSend&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:onclick=&quot;buttonClicked&quot; android:text=&quot;Send Notification&quot;&gt;

    &lt;/button&gt;&lt;button android:id=&quot;@+id/btnClearn&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:onclick=&quot;buttonClicked&quot; android:text=&quot;Clear Notification&quot;&gt;
</code></pre></div>
<p><strong>Step 3:</strong> Let&#39;s make button alive by writing action in MainActivity.java. I am using onClick property of buttons, so I don&#39;t require to find object of button and setOnClickListener. I can write code in &quot;buttonClicked&quot; method which is defined. When a user click on &quot;Send Notification&quot; button I am simply firing ExtensionService with INTENT_ACTION_ADD action and other required data and same for &quot;Clear Notification&quot; but with INTENT_ACTION_CLEAR action.  </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">package com.kpbird.hellosmartwatch;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.EditText;

public class MainActivity extends Activity {

 @Override
 protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_main);

 }

 public void buttonClicked(View v){
  if(v.getId() == R.id.btnSend){
   Intent serviceIntent = new Intent(this, HelloExtensionService.class);
         serviceIntent.setAction(HelloExtensionService.INTENT_ACTION_ADD);
         EditText etName = (EditText) findViewById(R.id.etTitle);
         EditText etMsg = (EditText) findViewById(R.id.etMessage);
         serviceIntent.putExtra(&quot;name&quot;, etName.getText().toString());
         serviceIntent.putExtra(&quot;message&quot;, etMsg.getText().toString());
         startService(serviceIntent);
  }
  else if(v.getId() == R.id.btnClearn){
   Intent serviceIntent = new Intent(this, HelloExtensionService.class);
         serviceIntent.setAction(HelloExtensionService.INTENT_ACTION_CLEAR);
         startService(serviceIntent);
  }

 }
}
</code></pre></div>
<p><strong>Step 4:</strong> Create HelloExtensionReceiver.java, It extends&nbsp;BroadcastReceiver. It works as bridge between SmartWatch and Host application, It will receive event generated in SmartWatch and forward it to HelloExtensionService.java  </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">package com.kpbird.hellosmartwatch;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class HelloExtensionReceiver  extends BroadcastReceiver{

 private String TAG = this.getClass().getSimpleName();
 @Override
 public void onReceive(Context context, Intent intent) {
    Log.i(TAG, &quot;HelloExtensionReceiver onReceiver: &quot; + intent.getAction());
       intent.setClass(context, HelloExtensionService.class);
       context.startService(intent);
 }

}
</code></pre></div>
<p><strong>Step 5:</strong> Create&nbsp;HelloRegistrationInformation.java and extends with RegistrationInformation&nbsp;class. As the name suggests, It will use to register host application in Smart Connect.&nbsp;It has six methods that we need to override, among these four methods are used to declare required APIs&nbsp;and two methods used for extension registration and source registration. You can have multiple sources in a host application.  </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">package com.kpbird.hellosmartwatch;

import java.util.ArrayList;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;

import com.sonyericsson.extras.liveware.aef.notification.Notification;
import com.sonyericsson.extras.liveware.aef.registration.Registration;
import com.sonyericsson.extras.liveware.extension.util.ExtensionUtils;
import com.sonyericsson.extras.liveware.extension.util.registration.RegistrationInformation;

public class HelloRegistrationInformation extends RegistrationInformation{
 private Context mContext;
 public HelloRegistrationInformation(Context ctx){
   if (ctx == null) {
             throw new IllegalArgumentException(&quot;context == null&quot;);
         }
         mContext = ctx;
 }
 @Override
 public int getRequiredNotificationApiVersion() {
  return 1;
 }
 @Override
 public int getRequiredWidgetApiVersion() {
  return 0;
 }

 @Override
 public int getRequiredControlApiVersion() {
  return 0;
 }

 @Override
 public int getRequiredSensorApiVersion() {
  return 0;
 }

 @Override
 public ContentValues getExtensionRegistrationConfiguration() {
    String extensionIcon = ExtensionUtils.getUriString(mContext,R.drawable.ic_launcher);
        String iconHostapp = ExtensionUtils.getUriString(mContext,R.drawable.ic_launcher);
         String extensionIcon48 = ExtensionUtils.getUriString(mContext,R.drawable.ic_launcher_48);

         String configurationText = &quot;Hello SmartWatch&quot;;
         String extensionName = &quot;Hello SmartWatch&quot;;

         ContentValues values = new ContentValues();
         values.put(Registration.ExtensionColumns.CONFIGURATION_ACTIVITY,MainActivity.class.getName());
         values.put(Registration.ExtensionColumns.CONFIGURATION_TEXT, configurationText);
         values.put(Registration.ExtensionColumns.EXTENSION_ICON_URI, extensionIcon);
         values.put(Registration.ExtensionColumns.EXTENSION_48PX_ICON_URI, extensionIcon48);

         values.put(Registration.ExtensionColumns.EXTENSION_KEY,HelloExtensionService.EXTENSION_KEY);
         values.put(Registration.ExtensionColumns.HOST_APP_ICON_URI, iconHostapp);
         values.put(Registration.ExtensionColumns.NAME, extensionName);
         values.put(Registration.ExtensionColumns.NOTIFICATION_API_VERSION,getRequiredNotificationApiVersion());
         values.put(Registration.ExtensionColumns.PACKAGE_NAME, mContext.getPackageName());
         return values;
 }

 @Override
 public ContentValues[] getSourceRegistrationConfigurations() {

   ContentValues sourceValues = null;

         String iconSource1 = ExtensionUtils.getUriString(mContext,R.drawable.ic_launcher_30);
         String iconSource2 = ExtensionUtils.getUriString(mContext,R.drawable.ic_launcher_18);
         String iconBw = ExtensionUtils.getUriString(mContext,R.drawable.ic_launcher_18_bw);
         String textToSpeech = &quot;Notification from Hello SmartWatch Application&quot;;
         sourceValues = new ContentValues();
         sourceValues.put(Notification.SourceColumns.ENABLED, true);
         sourceValues.put(Notification.SourceColumns.ICON_URI_1, iconSource1);
         sourceValues.put(Notification.SourceColumns.ICON_URI_2, iconSource2);
         sourceValues.put(Notification.SourceColumns.ICON_URI_BLACK_WHITE, iconBw);
         sourceValues.put(Notification.SourceColumns.UPDATE_TIME, System.currentTimeMillis());
         sourceValues.put(Notification.SourceColumns.NAME, mContext.getString(R.string.app_name));
         sourceValues.put(Notification.SourceColumns.EXTENSION_SPECIFIC_ID, HelloExtensionService.EXTENSION_SPECIFIC_ID);
         sourceValues.put(Notification.SourceColumns.PACKAGE_NAME, mContext.getPackageName());
         sourceValues.put(Notification.SourceColumns.TEXT_TO_SPEECH, textToSpeech);
         sourceValues.put(Notification.SourceColumns.ACTION_1,&quot;Hello&quot;);
         sourceValues.put(Notification.SourceColumns.ACTION_ICON_1,ExtensionUtils.getUriString(mContext, R.drawable.ic_launcher));

  List&lt;contentvalues&gt; bulkValues = new ArrayList&lt;contentvalues&gt;();
        bulkValues.add(sourceValues);
        return bulkValues.toArray(new ContentValues[bulkValues.size()]);
 }

}
</code></pre></div>
<p><strong>Step 6:</strong> Create HelloExtensionService.java and extends with ExtensionService. It will contain main logic of SmartWatch host application. We need to implement two abstract methods named &quot;getRegistrationInformation()&quot;, which sends object of HelloRegistrationInformation class and &quot;keepRunningWhenConnected()&quot;,return true if you want to keep ExtensionService running as long as SmartWatch is connected with Smart Phone. For notification example we need to create two methods named &quot;addData&quot; and &quot;clearData&quot;. It will generate and clear notification in SmartWatch respectively. We also need to implement onStartCommand to interact with Service.  </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">package com.kpbird.hellosmartwatch;

import android.content.ContentValues;
import android.content.Intent;
import android.database.Cursor;
import android.database.SQLException;
import android.util.Log;
import android.widget.Toast;

import com.sonyericsson.extras.liveware.aef.notification.Notification;
import com.sonyericsson.extras.liveware.aef.registration.Registration;
import com.sonyericsson.extras.liveware.extension.util.ExtensionService;
import com.sonyericsson.extras.liveware.extension.util.ExtensionUtils;
import com.sonyericsson.extras.liveware.extension.util.notification.NotificationUtil;
import com.sonyericsson.extras.liveware.extension.util.registration.DeviceInfoHelper;
import com.sonyericsson.extras.liveware.extension.util.registration.RegistrationInformation;

public class HelloExtensionService extends ExtensionService   {

 public static final String EXTENSION_SPECIFIC_ID = &quot;EXTENSION_SPECIFIC_ID_HELLO_NOTIFICATION&quot;;
 public static final String EXTENSION_KEY =  &quot;com.kpbird.hellosmartwatch.key&quot;;
 public static final String INTENT_ACTION_ADD = &quot;com.kpbird.hellosmartwatch.action.add&quot;;
 public static final String INTENT_ACTION_CLEAR = &quot;com.kpbird.hellosmartwatch.action.clear&quot;;

 private String TAG = this.getClass().getSimpleName();
 public HelloExtensionService() {
  super(EXTENSION_KEY);
  Log.i(TAG, &quot;Constructor&quot;);
 }

 @Override
 public void onCreate() {
  super.onCreate();
  Log.i(TAG, &quot;onCreate()&quot;);
 }

 @Override
 public void onDestroy() {
  super.onDestroy();
  Log.i(TAG, &quot;onDestroy()&quot;);
 }

 @Override
 public int onStartCommand(Intent intent, int flags, int startId) {
  int retVal = super.onStartCommand(intent, flags, startId);
  if (intent != null) {
   if (INTENT_ACTION_CLEAR.equals(intent.getAction())) {
    Log.d(TAG, &quot;onStart action: INTENT_ACTION_CLEAR&quot;);
    clearData(intent);
    stopSelfCheck();
   } else if (INTENT_ACTION_ADD.equals(intent.getAction())) {
    Log.d(TAG, &quot;onStart action: INTENT_ACTION_ADD&quot;);
    addData(intent);
    stopSelfCheck();
   }
  }

  return retVal;
 }

 @Override
 protected RegistrationInformation getRegistrationInformation() {
  return new HelloRegistrationInformation(this);
 }

 @Override
 protected boolean keepRunningWhenConnected() {
  return false;
 }

 private void clearData(Intent intent) {
   NotificationUtil.deleteAllEvents(this);
 }

 private void addData(Intent intent) {
  String name = &quot;Name&quot;;
  String message = &quot;Message&quot;;
  if (intent.getExtras().containsKey(&quot;name&quot;))
   name = intent.getExtras().getString(&quot;name&quot;);
  if (intent.getExtras().containsKey(&quot;message&quot;))
   message = intent.getExtras().getString(&quot;message&quot;);

  long time = System.currentTimeMillis();
  long sourceId = NotificationUtil.getSourceId(this,
    EXTENSION_SPECIFIC_ID);
  Log.i(TAG, &quot;Source ID :&quot; + sourceId);
  if (sourceId == NotificationUtil.INVALID_ID) {
   Log.e(TAG, &quot;Failed to insert data&quot;);
   return;
  }
  String profileImage = ExtensionUtils.getUriString(this,R.drawable.ic_launcher);

  ContentValues eventValues = new ContentValues();
  eventValues.put(Notification.EventColumns.EVENT_READ_STATUS, false);
  eventValues.put(Notification.EventColumns.DISPLAY_NAME, name);
  eventValues.put(Notification.EventColumns.MESSAGE, message);
  eventValues.put(Notification.EventColumns.PERSONAL, 1);
  eventValues.put(Notification.EventColumns.PROFILE_IMAGE_URI,profileImage);
  eventValues.put(Notification.EventColumns.PUBLISHED_TIME, time);
  eventValues.put(Notification.EventColumns.SOURCE_ID, sourceId);

  try {
   getContentResolver().insert(Notification.Event.URI, eventValues);
  } catch (IllegalArgumentException e) {
   Log.e(TAG, &quot;Failed to insert event&quot;, e);
  } catch (SecurityException e) {
   Log.e(TAG,
     &quot;Failed to insert event, is Live Ware Manager installed?&quot;,
     e);
  } catch (SQLException e) {
   Log.e(TAG, &quot;Failed to insert event&quot;, e);
  }
 }

 @Override
 protected void onViewEvent(Intent intent) {
  String action = intent.getStringExtra(Notification.Intents.EXTRA_ACTION);
  Log.i(TAG, &quot;Action : &quot; + action);
  String hostAppPackageName = intent.getStringExtra(Registration.Intents.EXTRA_AHA_PACKAGE_NAME);
  Log.i(TAG, &quot;HostAppPackageName: &quot; + hostAppPackageName);
  boolean advancedFeaturesSupported = DeviceInfoHelper.isSmartWatch2ApiAndScreenDetected(this, hostAppPackageName);
  Log.i(TAG, &quot;Advanced Features Supported: &quot; + advancedFeaturesSupported);
  int eventId = intent.getIntExtra(Notification.Intents.EXTRA_EVENT_ID,-1);
  try {
   Cursor cursor = getContentResolver().query(Notification.Event.URI,null, Notification.EventColumns._ID + &quot; = &quot; + eventId,null, null);
   if (cursor != null &amp;amp;&amp;amp; cursor.moveToFirst()) {
    String name = cursor.getString(cursor.getColumnIndex(Notification.EventColumns.DISPLAY_NAME));
    String message = cursor.getString(cursor.getColumnIndex(Notification.EventColumns.MESSAGE));
    Toast.makeText(this,&quot;Notification: Name: &quot; + name + &quot; Message: &quot; + message,Toast.LENGTH_LONG).show();
    Log.i(TAG, &quot;Name: &quot; + name);
    Log.i(TAG, &quot;Message: &quot;+ message);
   }
   cursor.close();
  } catch (Exception ex) {
   ex.printStackTrace();
  }
 }

 @Override
 public void onRegisterResult(boolean success) {
  super.onRegisterResult(success);
   Log.d(TAG, &quot;onRegisterResult :&quot; + success);
 }

}
</code></pre></div>
<p><strong>Step 7:</strong>&nbsp;Finally we need to register HelloExtensionReceiver and HelloExtensionService in AndroidManifest.xml like following. We also need to provide user permission &quot;EXTENSION_PERMISSION&quot;.  </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">&lt;!--?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?--&gt;
&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; package=&quot;com.kpbird.hellosmartwatch&quot; android:versioncode=&quot;1&quot; android:versionname=&quot;1.0&quot;&gt;

    &lt;uses-sdk android:minsdkversion=&quot;16&quot; android:targetsdkversion=&quot;16&quot;&gt;
        &lt;uses-permission android:name=&quot;com.sonyericsson.extras.liveware.aef.EXTENSION_PERMISSION&quot;&gt;

    &lt;application android:allowbackup=&quot;true&quot; android:icon=&quot;@drawable/ic_launcher&quot; android:label=&quot;@string/app_name&quot; android:theme=&quot;@style/AppTheme&quot;&gt;
        &lt;activity android:name=&quot;com.kpbird.hellosmartwatch.MainActivity&quot; android:label=&quot;@string/app_name&quot;&gt;
            &lt;intent-filter&gt;
                &lt;action android:name=&quot;android.intent.action.MAIN&quot;&gt;

                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot;&gt;
            &lt;/category&gt;&lt;/action&gt;&lt;/intent-filter&gt;
        &lt;/activity&gt;
         &lt;service android:name=&quot;.HelloExtensionService&quot;&gt;

        &lt;receiver android:name=&quot;.HelloExtensionReceiver&quot; android:permission=&quot;com.sonyericsson.extras.liveware.aef.HOSTAPP_PERMISSION&quot;&gt;
            &lt;intent-filter&gt;

                &lt;!-- Generic extension intents. --&gt;
                &lt;action android:name=&quot;com.sonyericsson.extras.liveware.aef.registration.EXTENSION_REGISTER_REQUEST&quot;&gt;
                &lt;action android:name=&quot;com.sonyericsson.extras.liveware.aef.registration.ACCESSORY_CONNECTION&quot;&gt;
                &lt;action android:name=&quot;android.intent.action.LOCALE_CHANGED&quot;&gt;

                &lt;!-- Notification intents --&gt;
                &lt;action android:name=&quot;com.sonyericsson.extras.liveware.aef.notification.VIEW_EVENT_DETAIL&quot;&gt;
                &lt;action android:name=&quot;com.sonyericsson.extras.liveware.aef.notification.REFRESH_REQUEST&quot;&gt;

                &lt;!-- Widget intents --&gt;
                &lt;action android:name=&quot;com.sonyericsson.extras.aef.widget.START_REFRESH_IMAGE_REQUEST&quot;&gt;
                &lt;action android:name=&quot;com.sonyericsson.extras.aef.widget.STOP_REFRESH_IMAGE_REQUEST&quot;&gt;
                &lt;action android:name=&quot;com.sonyericsson.extras.aef.widget.ONTOUCH&quot;&gt;
                &lt;action android:name=&quot;com.sonyericsson.extras.liveware.extension.util.widget.scheduled.refresh&quot;&gt;

                &lt;!-- Control intents --&gt;
                &lt;action android:name=&quot;com.sonyericsson.extras.aef.control.START&quot;&gt;
                &lt;action android:name=&quot;com.sonyericsson.extras.aef.control.STOP&quot;&gt;
                &lt;action android:name=&quot;com.sonyericsson.extras.aef.control.PAUSE&quot;&gt;
                &lt;action android:name=&quot;com.sonyericsson.extras.aef.control.RESUME&quot;&gt;
                &lt;action android:name=&quot;com.sonyericsson.extras.aef.control.ERROR&quot;&gt;
                &lt;action android:name=&quot;com.sonyericsson.extras.aef.control.KEY_EVENT&quot;&gt;
                &lt;action android:name=&quot;com.sonyericsson.extras.aef.control.TOUCH_EVENT&quot;&gt;
                &lt;action android:name=&quot;com.sonyericsson.extras.aef.control.SWIPE_EVENT&quot;&gt;
            &lt;/action&gt;&lt;/action&gt;&lt;/action&gt;&lt;/action&gt;&lt;/action&gt;&lt;/action&gt;&lt;/action&gt;&lt;/action&gt;&lt;/action&gt;&lt;/action&gt;&lt;/action&gt;&lt;/action&gt;&lt;/action&gt;&lt;/action&gt;&lt;/action&gt;&lt;/action&gt;&lt;/action&gt;&lt;/intent-filter&gt;
        &lt;/receiver&gt;
    &lt;/service&gt;&lt;/application&gt;
&lt;/uses-permission&gt;&lt;/uses-sdk&gt;&lt;/manifest&gt;
</code></pre></div>
<p><strong>Step 8:</strong> Connect your SmartPhone and run this example. It will display MainActivity. Before jumping to &quot;Send Notification&quot;, open Accessory Emulator and select Extension to verify that our HelloExtension is installed or not. Click on extension menu and it will display the registration details. If extension gets registered successfully then you can go back to Hello SmartWatch application and play with Send and Clear Notification functionality.  </p>

<p><strong>Screen Shots</strong>  </p>

<p><img src="http://2.bp.blogspot.com/-qmkgQsMXmlk/UrQkJWhwjWI/AAAAAAAAErA/PcH8ZoKKm3A/s400/1.png" alt=""></p>

<p>Open Accessory emulator and select SmartWatch 2, Wait for few second if Extensions and Notification API will not enable</p>

<p><img src="http://4.bp.blogspot.com/-SKllSLoUvOE/UrQkKk8MXhI/AAAAAAAAErg/LmfkOywcWIs/s400/2.png" alt=""></p>

<p>Select Extensions</p>

<p><img src="http://1.bp.blogspot.com/-r0k7Mq_Cd8A/UrQkKlXiEFI/AAAAAAAAErU/52L2Xo7CWUY/s400/3.png" alt=""></p>

<p>You can see extension detail</p>

<p><img src="http://4.bp.blogspot.com/-uOI58aGJD9A/UrQkKhPaznI/AAAAAAAAErc/WRx1bn8tXng/s400/4.png" alt=""></p>

<p>Click on &quot;Show Extension Settings&quot; will open this screen because at time of extension registration we provide MainActivity.java as Setting screen</p>

<p><img src="http://4.bp.blogspot.com/-EkWxs4WopX8/UrQkLZCBaFI/AAAAAAAAEsE/aHJ3F8FbuIA/s400/5.png" alt=""></p>

<p>Type Notification title and message and click Send Notification</p>

<p><img src="http://3.bp.blogspot.com/-Cf50vYHsDy0/UrQkLmZZOOI/AAAAAAAAErs/bo4Y_7sQ788/s400/6.png" alt=""></p>

<p>Go back to Accessory emulator and select Notification API </p>

<p><img src="http://1.bp.blogspot.com/-MqMl_Pcl1R8/UrQkLqHKbRI/AAAAAAAAEr0/2NSEMVlD2hQ/s400/7.png" alt=""></p>

<p>Select source, This will come from HelloRegistrationInformation&#39;s getSourceInformation function, It will display multiple option in the list if you have register multiple sources.</p>

<p><img src="http://1.bp.blogspot.com/-fHQ5sWfZ2Ak/UrQkMbVR_DI/AAAAAAAAEr4/zK_hM_qiqYw/s400/8.png" alt=""></p>

<p>Now, you can see the notification title which we just send</p>

<p><img src="http://4.bp.blogspot.com/-HZZzmLRFRio/UrQkMpkoAbI/AAAAAAAAEsI/O5l7z5tTG-4/s400/9.png" alt=""></p>

<p>click on menu button &quot;:&quot; will open action menu, you can add maximum 4 action, In our case we have implemented only one action </p>

<p><img src="http://1.bp.blogspot.com/-bJmib0fKsxU/UrQkJYy4NXI/AAAAAAAAErI/MO63PEXhv2A/s400/10.png" alt=""></p>

<p>Click on action menu will call onViewEvent method in HelloExtensionService.java. You can write any action in this method. In our example we just display Toast.</p>

<p><img src="http://3.bp.blogspot.com/-JpNw91T2wfY/UrQkJS79eJI/AAAAAAAAErE/OsFdrO03eOA/s400/11.png" alt=""></p>

<p>When you click on &quot;Clear Notification&quot; from HelloActivity and come back to emulator, you will see the effect</p>

<h2 id="download-source-code"><a href="https://github.com/kpbird/Hello-SmartWatch">Download Source Code</a></h2>

<p>Note: 1. Import project in eclipse 2. Make sure that you change SmartExtensionUtils and SmartExtensionAPI path from project properties.</p>

<p></contentvalues></contentvalues></button></textview></linearlayout></p>

               <!--      <p class="fsize16">Tags: 
                        <a class="label label-default light" href="#"><i class="fa fa-tags"></i> </a> 
                    </p> -->
                    <br/>
                     
                        <div class="nav-previous">
                          <a class="" href="http://kpbird.com/2013/12/sony-smartwatch-app-development-2" rel="prev"><i class="fa fa-long-arrow-left nav-previous-link"></i>Sony SmartWatch App Development 2</a>
                        </div>
                      
                    
                        <div class="nav-next">
                          <a class="" href="http://kpbird.com/2014/01/sony-smartwatch-app-development-4" rel="next">Sony SmartWatch App Development 4<i class="fa fa-long-arrow-right nav-next-link"></i></a>
                        </div>
                       
                     
                      <br/>
                    <hr/>
                    <div id="disqus_thread"></div>
                   
                    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
                    </noscript>
                    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                </div>
                <div class="right col-md-3">
    <!-- blog search -->
    <div class="widget">
        <h3>Blog Search</h3>
        <form action="/search" method="get" class="blog-search col-lg-12 nomargin nopadding">
            <div class="input-group input-group-lg">
                <input type="text" class="form-control" name="q" id="search-query" placeholder="Search" autocomplete="off" />
                <span class="input-group-btn">
                <button class="btn btn-primary"><i class="fa fa-search"></i></button>
                </span>
            </div>
        </form>
    </div>
    <div class="widget">
        <h3>Recent Posts</h3>
        <ul>
            
            <li><a href="/2015/06/Go-Language-For-Java-Developer-Part-1"><i class="fa fa-sign-out"></i> Go Language For Java Developer Part-1</a> <small>6 June 2015</small></li>
            
            <li><a href="/2015/06/Android-M-Preview-API-Changes"><i class="fa fa-sign-out"></i> Android M API Changes</a> <small>6 June 2015</small></li>
            
            <li><a href="/2015/04/Android-Simple-SyncAdapter-Example"><i class="fa fa-sign-out"></i> Android Simple SyncAdapter</a> <small>26 April 2015</small></li>
            
            <li><a href="/2014/12/How-Smart-Watch-can-change-your-life%20copy"><i class="fa fa-sign-out"></i> How Smart Watch can change your life</a> <small>4 December 2014</small></li>
            
            <li><a href="/2014/12/Wearable-technology-to-monitor-Parkinson%E2%80%99s-disease"><i class="fa fa-sign-out"></i> Wearable technology to monitor Parkinson’s disease</a> <small>1 December 2014</small></li>
            
        </ul>
    </div>
    <div class="widget">
        <h3>Categories</h3>
        <ul class="tag-box inline">
		  
		  
		     
		      <li><i class="fa fa-sign-out"></i> <a href="#android">Android <span>11</span></a></li>
		     
		      <li><i class="fa fa-sign-out"></i> <a href="#smartwatch">Smartwatch <span>4</span></a></li>
		     
		      <li><i class="fa fa-sign-out"></i> <a href="#architecture">Architecture <span>3</span></a></li>
		     
		      <li><i class="fa fa-sign-out"></i> <a href="#bigdata">Bigdata <span>1</span></a></li>
		     
		      <li><i class="fa fa-sign-out"></i> <a href="#random">Random <span>1</span></a></li>
		     
		      <li><i class="fa fa-sign-out"></i> <a href="#wearable">Wearable <span>1</span></a></li>
		     
		      <li><i class="fa fa-sign-out"></i> <a href="#smart watch">Smart watch <span>1</span></a></li>
		     
		      <li><i class="fa fa-sign-out"></i> <a href="#go">Go <span>1</span></a></li>
		    
		  
		
		</ul>
    </div>
    <div class="widget">
    	<center>
    	<script type="text/javascript" src="http://jb.revolvermaps.com/2/4.js?i=1ole8lzza7z&amp;m=3&amp;h=128&amp;c=57ad68&amp;r=10" async="async"></script>
    	</center>
    </div>
    <div class="widget">
    	<center>
    	<a href="http://www.alexa.com/siteinfo/kpbird.com"><script type='text/javascript' src='http://xslt.alexa.com/site_stats/js/t/b?url=kpbird.com'></script></a>
    	</center>
    </div>
    <div class="widget">
    	<center>
    	<a href="http://www.dzone.com/aboutmvb">
			<img border="0" src="http://4.bp.blogspot.com/-cTjWLbbiOjg/UzEKwZBm_BI/AAAAAAAAE0o/-Cn8NEX6y2g/s1600/big-mvbbutton.png">
		</a>
		</center>
    </div>
    <div class="widget">
    	<center>
    	<a href="http://www.javacodegeeks.com/" imageanchor="1">
    		<img alt="Java Code Geeks" src="http://cdn.javacodegeeks.com/wp-content/uploads/2012/12/JavaCodeGeek_Badge.png" title="Java Code Geeks">
    	</a>
    	</center>
    </div>

</div>
            </div>
        </article>
    </section>
     <footer>
        <!-- SCROOL TO TOP -->
        <a href="#toTop" class="fa fa-arrow-up toTop"></a>
        <div class="container">
            <div class="row">
                <div class="col-md-6 copyright">
                    kpbird.com
                    <br />2015 &copy; All Rights Reserved.
                </div>
                <div class="col-md-6 text-right">
                    <div class="addthis_toolbox">
                        <a class="addthis_button_linkedin_follow" addthis:userid="kpbird">
                            <span class="social fa fa-linkedin"></span>
                        </a>
                        <a class="addthis_button_twitter_follow" addthis:userid="kpbird">
                            <span class="social fa fa-twitter"></span>
                        </a>
                        <a class="addthis_button_google_follow" addthis:userid="+KetanParmar">
                            <span class="social fa fa-google-plus"></span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- AddThis Smart Layers BEGIN -->
    <!-- Go to http://www.addthis.com/get/smart-layers to customize -->
    //  <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5308cddf5fd4896a"></script>
    // <script type="text/javascript">
    // addthis.layers({
    //     'theme': 'transparent',
    //     'share': {
    //         'position': 'left',
    //         'numPreferredServices': 5
    //     }
    // });

    // var addthis_share={
    //     url_transforms:{
    //         shorten:{
    //             twitter:'bitly',
    //             facebook:'bitly',
    //             google:'bitly',
    //             linkedin:'bitly'
    //         }
    //     },
    //     shorteners:{
    //         bitly:{}
    //     }
    // };

      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-3380700-3', 'kpbird.com');
  ga('send', 'pageview');
    </script>
     
<script id="search-results-template" type="text/mustache">
  {{#entries}}
    <article>
      <h3>
        {{#date}}<small><time datetime="{{pubdate}}" pubdate>{{displaydate}}</time></small>{{/date}}
        <a href="{{url}}">{{title}}</a>
      </h3>
    </article>
  {{/entries}}
</script>

    <!-- AddThis Smart Layers END -->
<!-- <script type="text/javascript" src="/../assets/plugins/jquery/jquery-1.10.2.min.js"></script> -->
<script type="text/javascript" src="/../assets/js/search.min.js"></script>
<script type="text/javascript" src="/../assets/plugins/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/../assets/plugins/jquery-fitvids/jquery.fitvids.min.js"></script>
<script type="text/javascript" src="/../assets/plugins/jquery-appear/jquery.appear.js"></script>
<script type="text/javascript" src="/../assets/plugins/superslides/dist/jquery.superslides.min.js"></script>
<script type="text/javascript" src="/../assets/plugins/jquery-owl-carousel/owl.carousel.min.js"></script>
<script type="text/javascript" src="/../assets/plugins/carouFredSel/jquery.carouFredSel-6.2.1-packed.js"></script>
<script type="text/javascript" src="/../assets/plugins/jquery-countTo/jquery.countTo.js"></script>
<script type="text/javascript" src="/../assets/plugins/magnific-popup/jquery.magnific-popup.min.js"></script>
<script type="text/javascript" src="/../assets/plugins/jquery.mb.YTPlayer.js"></script>
<script async type="text/javascript" src="/../assets/js/scripts.js"></script>

<script async type="text/javascript" src="/../assets/js/blog.search.js"></script>


<!-- Change UA-XXXXX-X with your site ID -->
<!--<script>
        window._gaq = [['_setAccount','UA-XXXXX-X'],['_trackPageview'],['_trackPageLoadTime']];
        Modernizr.load({load: ('https:' == location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js'});
</script>  -->
     <script type="text/javascript">
                    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                    var disqus_shortname = 'kpbird';
                    /* * * DON'T EDIT BELOW THIS LINE * * */
                     (function() {
                        var dsq = document.createElement('script');
                        dsq.type = 'text/javascript';
                        dsq.async = true;
                        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    })();
                    (function() {
                        var s = document.createElement('script');
                        s.async = true;
                        s.type = 'text/javascript';
                        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
                        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
                    }());
                    </script>

              
</body>

</html>